"use strict";!function(){angular.module("binary.pages.accept-terms-and-conditions",["binary.pages.accept-terms-and-conditions.controllers","binary.pages.accept-terms-and-conditions.directives"]),angular.module("binary.pages.accept-terms-and-conditions.controllers",[]),angular.module("binary.pages.accept-terms-and-conditions.directives",[])}(),function(){angular.module("binary.pages.help",["binary.pages.help.controllers"]),angular.module("binary.pages.help.controllers",[])}(),function(){angular.module("binary.pages.home",["binary.pages.home.controllers"]),angular.module("binary.pages.home.controllers",[])}(),function(){angular.module("binary.pages.new-real-account-opening",["binary.pages.new-real-account-opening.controllers","binary.pages.new-real-account-opening.components"]),angular.module("binary.pages.new-real-account-opening.controllers",[]),angular.module("binary.pages.new-real-account-opening.components",["binary.pages.new-real-account-opening.components.new-account-maltainvest","binary.pages.new-real-account-opening.components.new-account-real"])}(),function(){angular.module("binary.pages.profile",["binary.pages.profile.controllers"]),angular.module("binary.pages.profile.controllers",[])}(),function(){angular.module("binary.pages.profit-table",["binary.pages.profit-table.controllers","binary.pages.profit-table.directives","binary.pages.profit-table.filters"]),angular.module("binary.pages.profit-table.controllers",[]),angular.module("binary.pages.profit-table.directives",[]),angular.module("binary.pages.profit-table.filters",[])}(),function(){angular.module("binary.pages.self-exclusion",["binary.pages.self-exclusion.controllers"]),angular.module("binary.pages.self-exclusion.controllers",[])}(),function(){angular.module("binary.pages.settings",["binary.pages.settings.controllers"]),angular.module("binary.pages.settings.controllers",[])}(),function(){angular.module("binary.pages.signin",["binary.pages.signin.components","binary.pages.signin.controllers"]),angular.module("binary.pages.signin.controllers",[]),angular.module("binary.pages.signin.components",["binary.pages.signin.components.oauth"])}(),function(){angular.module("binary.pages.statement",["binary.pages.statement.controllers","binary.pages.statement.directives","binary.pages.statement.filters"]),angular.module("binary.pages.statement.controllers",[]),angular.module("binary.pages.statement.directives",[]),angular.module("binary.pages.statement.filters",[])}(),function(){angular.module("binary.pages.terms-and-conditions",["binary.pages.terms-and-conditions.controllers","binary.pages.terms-and-conditions.directives"]),angular.module("binary.pages.terms-and-conditions.controllers",[]),angular.module("binary.pages.terms-and-conditions.directives",[])}(),function(){angular.module("binary.pages.trade",["binary.pages.trade.components","binary.pages.trade.controllers","binary.pages.trade.services"]),angular.module("binary.pages.trade.components",["binary.pages.trade.components.options","binary.pages.trade.components.chart","binary.pages.trade.components.payout","binary.pages.trade.components.purchase","binary.pages.trade.components.longcode"]),angular.module("binary.pages.trade.controllers",[]),angular.module("binary.pages.trade.services",[])}(),function(){angular.module("binary.pages.transaction-detail",["binary.pages.transaction-detail.controllers","binary.pages.transaction-detail.directives"]),angular.module("binary.pages.transaction-detail.controllers",[]),angular.module("binary.pages.transaction-detail.directives",[])}(),function(){angular.module("binary.pages.update",["binary.pages.update.controllers"]),angular.module("binary.pages.update.controllers",[])}(),function(){angular.module("binary.share.components.accounts",["binary.share.components.accounts.controllers","binary.share.components.accounts.directives"]),angular.module("binary.share.components.accounts.controllers",[]),angular.module("binary.share.components.accounts.directives",[])}(),function(){angular.module("binary.share.components.app-version",["binary.share.components.app-version.controllers","binary.share.components.app-version.directives"]),angular.module("binary.share.components.app-version.controllers",[]),angular.module("binary.share.components.app-version.directives",[])}(),function(){angular.module("binary.share.components.balance",["binary.share.components.balance.directives","binary.share.components.balance.controllers"]),angular.module("binary.share.components.balance.controllers",[]),angular.module("binary.share.components.balance.directives",[])}(),function(){angular.module("binary.share.components.connectivity",["binary.share.components.connectivity.controllers","binary.share.components.connectivity.directives"]),angular.module("binary.share.components.connectivity.controllers",[]),angular.module("binary.share.components.connectivity.directives",[])}(),function(){angular.module("binary.share.components.language",["binary.share.components.language.directives","binary.share.components.language.controllers"]),angular.module("binary.share.components.language.directives",[]),angular.module("binary.share.components.language.controllers",[])}(),function(){angular.module("binary.share.components.logout",["binary.share.components.logout.controllers","binary.share.components.logout.directives"]),angular.module("binary.share.components.logout.controllers",[]),angular.module("binary.share.components.logout.directives",[])}(),function(){angular.module("binary.share.components.long-press",["binary.share.components.long-press.directives"]),angular.module("binary.share.components.long-press.directives",[])}(),function(){angular.module("binary.share.components.number",["binary.share.components.number.directives"]),angular.module("binary.share.components.number.directives",[])}(),function(){angular.module("binary.share.components.ping",["binary.share.components.ping.controllers","binary.share.components.ping.directives"]),angular.module("binary.share.components.ping.controllers",[]),angular.module("binary.share.components.ping.directives",[])}(),function(){angular.module("binary.share.components.real-account-opening",["binary.share.components.real-account-opening.controllers","binary.share.components.real-account-opening.directives"]),angular.module("binary.share.components.real-account-opening.controllers",[]),angular.module("binary.share.components.real-account-opening.directives",[])}(),function(){angular.module("binary.share.components.reality-check",["binary.share.components.reality-check.controllers","binary.share.components.reality-check.directives"]),angular.module("binary.share.components.reality-check.controllers",[]),angular.module("binary.share.components.reality-check.directives",[])}(),function(){angular.module("binary.share.components.regex-validate",["binary.share.components.regex-validate.directives"]),angular.module("binary.share.components.regex-validate.directives",[])}(),function(){angular.module("binary.share.components.spinner-logo",["binary.share.components.spinner-logo.directives","binary.share.components.spinner-logo.controllers"]),angular.module("binary.share.components.spinner-logo.directives",[]),angular.module("binary.share.components.spinner-logo.controllers",[])}(),function(){angular.module("binary.share.components.updater",["binary.share.components.updater.controllers","binary.share.components.updater.directives"]),angular.module("binary.share.components.updater.controllers",[]),angular.module("binary.share.components.updater.directives",[])}(),function(){angular.module("binary.pages.new-real-account-opening.components.new-account-maltainvest",[])}(),function(){angular.module("binary.pages.new-real-account-opening.components.new-account-real",[])}(),function(){angular.module("binary.pages.signin.components.oauth",[])}(),function(){angular.module("binary.pages.trade.components.chart",["binary.pages.trade.components.chart.controllers","binary.pages.trade.components.chart.directives","binary.pages.trade.components.chart.services"]),angular.module("binary.pages.trade.components.chart.controllers",[]),angular.module("binary.pages.trade.components.chart.directives",[]),angular.module("binary.pages.trade.components.chart.services",[])}(),function(){angular.module("binary.pages.trade.components.longcode",["binary.pages.trade.components.longcode.controllers","binary.pages.trade.components.longcode.directives"]),angular.module("binary.pages.trade.components.longcode.controllers",[]),angular.module("binary.pages.trade.components.longcode.directives",[])}(),function(){angular.module("binary.pages.trade.components.options",["binary.pages.trade.components.options.controllers","binary.pages.trade.components.options.directives","binary.pages.trade.components.options.services"]),angular.module("binary.pages.trade.components.options.controllers",[]),angular.module("binary.pages.trade.components.options.directives",[]),angular.module("binary.pages.trade.components.options.services",[])}(),function(){angular.module("binary.pages.trade.components.payout",["binary.pages.trade.components.payout.controllers","binary.pages.trade.components.payout.directives"]),angular.module("binary.pages.trade.components.payout.controllers",[]),angular.module("binary.pages.trade.components.payout.directives",[])}(),function(){angular.module("binary.pages.trade.components.purchase",["binary.pages.trade.components.purchase.controllers","binary.pages.trade.components.purchase.directives"]),angular.module("binary.pages.trade.components.purchase.controllers",[]),angular.module("binary.pages.trade.components.purchase.directives",[])}(),function(){"use restrict";angular.module("binary",["ionic","pascalprecht.translate","hmTouchEvents","ngIOS9UIWebViewPatch","binary.share.components","binary.share.services","binary.pages","ngMessages","ngCordova"]),angular.module("binary.share.components",["binary.share.components.language","binary.share.components.ping","binary.share.components.accounts","binary.share.components.spinner-logo","binary.share.components.balance","binary.share.components.long-press","binary.share.components.reality-check","binary.share.components.real-account-opening","binary.share.components.logout","binary.share.components.connectivity","binary.share.components.regex-validate","binary.share.components.number","binary.share.components.app-version","binary.share.components.updater"]),angular.module("binary.share.services",[]),angular.module("binary.pages",["binary.pages.home","binary.pages.signin","binary.pages.help","binary.pages.trade","binary.pages.new-real-account-opening","binary.pages.profit-table","binary.pages.statement","binary.pages.transaction-detail","binary.pages.settings","binary.pages.self-exclusion","binary.pages.profile","binary.pages.terms-and-conditions","binary.pages.accept-terms-and-conditions","binary.pages.update"]),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}(),function(){angular.module("binary").run(["$rootScope","$ionicPlatform","$state","alertService","appStateService",function(e,t,n,a,o){t.ready(function(){window.cordova&&window.cordova.plugins.backgroundMode&&(cordova.plugins.backgroundMode.setDefaults({title:"Binary.com TickTrade",text:"",ticker:"TickTrade is running in background",color:"#2A3052"}),cordova.plugins.backgroundMode.enable()),"undefined"!=typeof window.ga?window.ga.startTrackerWithId("UA-40877026-7"):console.log("Google Analytics is unavailable"),window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),t.registerBackButtonAction(function(){if(!o.isPopupOpen)if(["signin","home","update"].indexOf(n.current.name)>-1)navigator.app.exitApp();else{if("trade"===n.current.name&&o.purchaseMode)return;"trade"!==n.current.name||o.purchaseMode||o.tradeMode?["trade","profittable","statement"].indexOf(n.current.name)>-1?a.confirmExit(function(e){1==e&&(sessionStorage.removeItem("start"),sessionStorage.removeItem("_interval"),navigator.app.exitApp())}):n.goBack():(o.tradeMode=!0,e.$broadcast("appState:tradeMode"),e.$$phase||e.$apply())}},500)})}])}(),angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(e){e.decorator("$browser",["$delegate","$window",function(e,t){function n(e){return/(iPhone|iPad|iPod).* OS 9_\d/.test(e)&&!/Version\/9\./.test(e)}function a(e){function t(){n=null}var n=null,a=e.url;return e.url=function(){return arguments.length?(n=arguments[0],a.apply(e,arguments)):n||a.apply(e,arguments)},window.addEventListener("popstate",t,!1),window.addEventListener("hashchange",t,!1),e}return n(t.navigator.userAgent)?a(e):e}])}]),angular.module("binary").constant("config",{app_id:"10",wsUrl:"wss://ws.binaryws.com/websockets/v3",oauthUrl:"https://oauth.binary.com/oauth2/authorize",tradeCategories:[{name:"up_down",markets:["forex","volidx","random"],value:"UP/DOWN"},{name:"digit_matches_differs",value:"MATCH/DIFF",markets:["volidx","random"],digits:!0},{name:"digit_even_odd",markets:["volidx","random"],value:"EVEN/ODD"},{name:"digit_over_under",value:"OVER/UNDER",markets:["volidx","random"],digits:!0},{name:"asians",value:"Asians",markets:["volidx","random"]}],tradeTypes:[{name:"Up",value:"CALL",digits:!1,category:"UP/DOWN"},{name:"Down",value:"PUT",digits:!1,category:"UP/DOWN"},{name:"Asians Up",value:"ASIANU",digits:!1,category:"Asians"},{name:"Asians Down",value:"ASIAND",digits:!1,category:"Asians"},{name:"Digit Match",value:"DIGITMATCH",digits:!0,category:"MATCH/DIFF"},{name:"Digit Differs",value:"DIGITDIFF",digits:!0,category:"MATCH/DIFF"},{name:"Digit Even",value:"DIGITEVEN",category:"EVEN/ODD"},{name:"Digit Odd",value:"DIGITODD",category:"EVEN/ODD"},{name:"Digit Over",value:"DIGITOVER",digits:!0,category:"OVER/UNDER"},{name:"Digit Under",value:"DIGITUNDER",digits:!0,category:"OVER/UNDER"}],language:"en",assetIndexes:{symbol:0,displayName:1,contracts:2,contractName:0,contractDisplayName:1,contractFrom:2,contractTo:3},appSupportedLanguages:["en","id","ru","zh_tw","zh_cn","de"]}),function(){function e(e){e.decorator("currencyFilter",["$delegate",function(e){function t(e,t,n){return Intl.NumberFormat(e,{style:"currency",currency:t||"USD"}).format(n)}var n=function(){var e=(localStorage.language||"en").replace("_","-"),n=arguments[1]||"USD";return t(e,n,arguments[0])};return n}])}angular.module("binary").config(e),e.$inject=["$provide"]}(),function(){function e(e){e.decorator("$state",["$delegate","$rootScope",function(e,t){var n=e;return n.previous=void 0,n.goBack=function(){n.previous&&n.go(n.previous.name)},t.$on("$stateChangeSuccess",function(e,t,a,o,r){n.previous={name:o,params:r}}),n}])}e.$inject=["$provide"],angular.module("binary").config(e)}(),angular.module("binary").config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,n){n.views.swipeBackEnabled(!1),e.state("home",{url:"/",cache:!1,templateUrl:"js/pages/home/home.template.html",controller:"HomeController"}).state("layout",{cache:!1,templateUrl:"js/share/templates/layout/main-layout.template.html","abstract":!0}).state("trade",{parent:"layout",cache:!1,controller:"TradeController",controllerAs:"vm",templateUrl:"js/pages/trade/trade.template.html"}).state("signin",{cache:!1,templateUrl:"js/pages/sign-in/sign-in.template.html",controller:"SigninController",controllerAs:"vm"}).state("help",{templateUrl:"js/pages/help/help.template.html",controller:"HelpController",controllerAs:"vm"}).state("profittable",{parent:"layout",cache:!0,templateUrl:"js/pages/profit-table/profit-table.template.html",controller:"ProfitTableController",controllerAs:"vm"}).state("statement",{parent:"layout",cache:!0,templateUrl:"js/pages/statement/statement.template.html",controller:"StatementController",controllerAs:"vm"}).state("transactiondetail",{parent:"layout",cache:!1,templateUrl:"js/pages/transaction-detail/transaction-detail.template.html",controller:"TransactionDetailController",controllerAs:"vm",reloadOnSearch:!1}).state("realaccountopening",{parent:"layout",cache:!1,templateUrl:"js/pages/new-real-account-opening/new-real-account-opening.template.html",controller:"NewRealAccountOpeningController",controllerAs:"vm"}).state("language",{parent:"layout",cache:!1,templateUrl:"js/pages/language/language.template.html"}).state("settings",{parent:"layout",cache:!1,templateUrl:"js/pages/settings/settings.template.html",controller:"SettingsController",controllerAs:"vm"}).state("self-exclusion",{parent:"layout",cache:!1,templateUrl:"js/pages/self-exclusion/self-exclusion.template.html",controller:"SelfExclusionController",controllerAs:"vm"}).state("no-connection",{templateUrl:"js/share/components/connectivity/connectivity.template.html"}).state("profile",{parent:"layout",cache:!1,templateUrl:"js/pages/profile/profile.template.html",controller:"ProfileController",controllerAs:"vm"}).state("acceptTermsAndConditions",{parent:"layout",cache:!1,templateUrl:"js/pages/accept-terms-and-conditions/accept-terms-and-conditions.template.html",controller:"AcceptTermsAndConditionsController",controllerAs:"vm"}).state("update",{url:"/update",cache:!1,templateUrl:"js/pages/update/update.template.html",controller:"UpdateController",controllerAs:"vm"}),t.otherwise("/")}]),angular.module("binary").config(["$translateProvider",function(e){var t=localStorage.language||"en";e.preferredLanguage(t),e.useStaticFilesLoader({prefix:"i18n/",suffix:".json"})}]),function(){function e(e,t,n,a,o){var r=this;r.data={},r.data.landingCompanyName=localStorage.getItem("landingCompanyName"),r.data.linkToTermAndConditions="https://www.binary.com/"+(localStorage.getItem("language")||"en")+"/terms-and-conditions.html",r.updateUserTermsAndConditions=function(){n.sendRequestFor.TAndCApprovalSend()},r.openTermsAndConditions=function(){window.open(r.data.linkToTermAndConditions,"_blank")},e.$on("tnc_approval",function(e,n){1==n&&t.go("trade")}),e.$on("tnc_approval:error",function(e,t){a.displayError(t.message)})}angular.module("binary.pages.accept-terms-and-conditions.controllers").controller("AcceptTermsAndConditionsController",e),e.$inject=["$scope","$state","websocketService","alertService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/accept-terms-and-conditions/accept-terms-and-conditions.template.html",controller:"AcceptTermsAndConditionsController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.accept-terms-and-conditions.directives").directive("bgAcceptTermsAndConditions",e)}(),function(){function e(e,t,n){var a=this,o=n.read();a.tokenUrl="https://www.binary.com/"+o.toLowerCase()+"/user/settings/api_tokenws.html",t.google.trackView("Help"),a.backToSignInPage=function(){e.go("signin")},a.openExternal=function(e){return window.open(e.currentTarget.href,"_system"),!1}}angular.module("binary.pages.help.controllers").controller("HelpController",e),e.$inject=["$state","analyticsService","languageService"]}(),function(){function e(e,t,n,a,o,r){var i=this;r.sendRequestFor.websiteStatus(),e.$on("authorize",function(e,n){n?t.go("trade"):t.go("signin")}),i.init=function(){a.google.trackView("Home"),n.hasDefault()?o.isLoggedin?t.go("trade"):n.validate():t.go("signin")},i.init()}angular.module("binary.pages.home.controllers").controller("HomeController",e),e.$inject=["$scope","$state","accountService","analyticsService","appStateService","websocketService"]}(),function(){function e(e,t){var n=this;n.isNewAccountReal=!1,n.isNewAccountMaltainvest=!1,e.$applyAsync(function(){t.isNewAccountReal&&(n.isNewAccountReal=!0,n.isNewAccountMaltainvest=!1),t.isNewAccountMaltainvest&&(n.isNewAccountMaltainvest=!0,n.isNewAccountReal=!1)})}angular.module("binary.pages.new-real-account-opening.controllers").controller("NewRealAccountOpeningController",e),e.$inject=["$scope","appStateService"]}(),function(){function e(e,t,n,a,o){function r(){o.sendRequestFor.accountSetting()}function i(){var e={address_line_1:c.profile.address_line_1,address_line_2:c.profile.address_line_2,address_city:c.profile.address_city,address_state:c.profile.address_state,address_postcode:c.profile.address_postcode,phone:c.profile.phone};o.sendRequestFor.setAccountSettings(e)}function s(){r(),c.isVirtualAccount=a.virtuality}var c=this;c.states=[],c.disableUpdateButton=!0,e.$on("get_settings",function(t,n){e.$applyAsync(function(){c.profile=n,c.profile.date_of_birth&&(c.profile.date_of_birth=new Date(1e3*c.profile.date_of_birth).toISOString("yyyy-mm-dd").slice(0,10)),o.sendRequestFor.residenceListSend()})}),e.$on("set-settings",function(e,a){a?t(["profile.success","profile.success_message"]).then(function(e){n.displayAlert(e["profile.success"],e["profile.success_message"])}):t("profile.error_message").then(function(e){n.displayError(e["profile.error_message"])}),c.disableUpdateButton=!1}),e.$on("set-settings:error",function(e,t){n.displayError(t),c.disableUpdateButton=!1}),e.$on("residence_list",function(e,t){if(t){var n=_.find(t,["text",c.profile.country]);n&&o.sendRequestFor.statesListSend(n.value)}}),e.$on("states_list",function(t,n){n&&e.$applyAsync(function(){c.states=n,c.disableUpdateButton=!1})}),e.$on("authorize",function(e,t){s()}),s(),c.submit=function(){c.disableUpdateButton=!0,i()}}angular.module("binary.pages.profile.controllers").controller("ProfileController",e),e.$inject=["$scope","$translate","alertService","appStateService","websocketService"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l){var u=this;u.data={},u.noTransaction=!1,u.noMore=!1,u.hasRefresh=!1,u.enteredNow=!1,u.ios=ionic.Platform.isIOS(),u.android=ionic.Platform.isAndroid(),u.goToTopButton=!1,u.backFromMainPages=!1,u.firstCompleted=!1,u.noMoreRequest=!1,u.jumpToDateInputShow=!1,u.hasError=!1,u.dateChanged=!1,u.appIdAllowed=i.app_id,e.$on("$stateChangeSuccess",function(e,t,n,a,o){u.lastPage=a.name,u.enteredNow=!0,u.thisPage=t.name,"transactiondetail"!=u.lastPage&&"profittable"==u.thisPage&&(u.resetParams(),u.firstCompleted=!1,u.backFromMainPages=!0,u.jumpToDateInputShow=!1,u.notAuthorizeYet())}),e.$on("authorize",function(e,t){l.profitTableRefresh&&u.notAuthorizeYet()}),u.notAuthorizeYet=function(){l.isLoggedin&&(l.profitTableRefresh||u.backFromMainPages)&&(o.remove(),u.resetParams(),u.jumpToDateInputShow=!1,u.firstCompleted=!1,u.noMoreRequest=!1,u.filteredTransactions=[],u.noTransaction=!1,u.hasError=!1,u.backFromMainPages=!1,s.completedGroup=!0,l.profitTableRefresh=!1,l.isProfitTableSet=!1,u.hasError=!1,u.loadMore())},u.delayedLoad=function(){n(u.loadMore,50)},u.loadMore=function(){s.completedGroup?s.completedGroup&&(s.currentPage+=1,u.pageState()):u.setBatch()},u.pageState=function(){l.isProfitTableSet?l.isProfitTableSet&&u.enteredNow&&"transactiondetail"==u.lastPage?(u.enteredNow=!1,u.lastPage="",u.setParams()):l.isProfitTableSet&&u.dateChanged&&s.completedGroup?(u.transactions=[],u.batchedTransaction=[],u.filteredTransactions=[],u.dateChanged=!1,s.currentPage=0,s.batchNum=0,s.batchLimit=0,s.completedGroup=!1,u.setParams(),u.goTop()):l.isProfitTableSet&&!u.dateChanged&&s.completedGroup?(u.transactions=[],s.completedGroup=!1,u.setParams()):u.dateChanged||(u.setParams(),e.$applyAsync(function(){u.noMore=!1})):(l.isProfitTableSet=!0,s.dateType="allTime",u.jumpToDateInputShow=!1,u.resetParams(),u.setParams(),s.completedGroup=!1,u.goTop()),u.sendRequest()},u.setParams=function(){u.data.appID=s.appID,u.data.dateType=s.dateType,u.data.dateFrom=s.dateFrom,u.data.dateTo=s.dateTo,u.data.currentPage=s.currentPage,u.itemsPerPage=300,u.limit=u.itemsPerPage+1},u.resetParams=function(){s.appID="allApps",s.dateFrom="",s.dateTo="",s.currentPage=0,u.transactions=[],u.batchedTransaction=[],s.completedGroup=!0,s.batchNum=0,s.batchLimit=0},u.sendRequest=function(){u.params={description:1,limit:u.limit,offset:u.itemsPerPage*u.data.currentPage},u.data.hasOwnProperty("dateFrom")&&""!=u.data.dateFrom&&(u.params.date_from=u.data.dateFrom),u.data.hasOwnProperty("dateTo")&&""!=u.data.dateTo&&(u.params.date_to=u.data.dateTo+86400),u.params.req_id=u.data.dateTo||Math.round((new Date).getTime()/1e3),u.reqId=u.params.req_id,c.sendRequestFor.profitTable(u.params)},e.$on("profit_table:update",function(t,n,a){u.firstCompleted=!0,u.profitTable=n,u.count=u.profitTable.count,u.hasError=!1,u.reqId==a&&(0==u.count?(u.noTransaction=!0,e.$applyAsync(function(){u.noMore=!0}),u.setBatch()):u.count>0&&(u.count<u.limit?(u.noTransaction=!1,u.noMoreRequest=!0,u.profitTable.transactions.forEach(function(e,t){u.transactions.push(u.profitTable.transactions[t])}),u.setBatch()):u.count==u.limit&&(u.noTransaction=!1,e.$applyAsync(function(){u.noMore=!1}),u.profitTable.transactions.forEach(function(e,t){t<u.count-1&&u.transactions.push(u.profitTable.transactions[t])}),u.setBatch())))}),e.$on("profit_table:error",function(t,n){e.$applyAsync(function(){u.hasError=!0,u.errorMessage=n})}),u.setBatch=function(){s.batchLimit=Math.ceil(u.transactions.length/s.batchSize),u.sliced=[],u.sliced=u.transactions.slice(s.batchNum*s.batchSize,(s.batchNum+1)*s.batchSize),u.sliced.forEach(function(e,t){u.batchedTransaction.push(u.sliced[t])}),s.batchNum=s.batchNum+1,s.batchNum==s.batchLimit&&(s.batchLimit=0,s.batchNum=0,s.completedGroup=!0,u.noMoreRequest&&e.$applyAsync(function(){u.noMore=!0})),u.setFiltered()},u.setFiltered=function(){e.$applyAsync(function(){s.appID=u.data.appID,u.filteredTransactions=t("DataFilter")(u.batchedTransaction,s.appID,u.appIdAllowed),0==u.filteredTransactions.length?u.noTransaction=!0:u.noTransaction=!1,e.$broadcast("scroll.infiniteScrollComplete")})},u.dateFilter=function(){s.dateType=u.data.dateType,u.dateChanged=!0,u.noTransaction=!1,"allTime"==s.dateType?(e.$applyAsync(function(){u.jumpToDateInputShow=!1}),s.completedGroup=!0,u.firstCompleted=!1,u.data.dateTo="",s.dateFrom="",s.dateTo="",u.loadMore()):"jumpToDate"==s.dateType&&(e.$applyAsync(function(){u.jumpToDateInputShow=!0}),s.completedGroup=!0,u.firstCompleted=!1,u.nowDateInputLimit=t("date")(new Date,"yyyy-MM-dd"),document.getElementById("dateTo").setAttribute("max",u.nowDateInputLimit),document.getElementById("dateTo").value=u.nowDateInputLimit,u.jumpToDateFilter())},u.jumpToDateFilter=function(){"jumpToDate"==s.dateType&&(s.completedGroup=!0,u.dateChanged=!0,u.noTransaction=!1,u.firstCompleted=!1,s.currentPage=0,u.data.dateTo=new Date(u.data.end).getTime()/1e3||"",s.dateTo=u.data.dateTo,u.loadMore())},u.goTop=function(){r.scrollTop(!0)},u.goToTopButtonCondition=function(){e.$applyAsync(function(){n(function(){r.$getByHandle("handler").getScrollPosition().top>=30?u.goToTopButton=!0:r.$getByHandle("handler").getScrollPosition().top<30&&(u.goToTopButton=!1)},500)})},u.sendContractDetailRequest=function(e){u.id=e,sessionStorage.setItem("id",u.id),a.go("transactiondetail")}}angular.module("binary.pages.profit-table.controllers").controller("ProfitTableController",e),e.$inject=["$scope","$filter","$timeout","$state","$templateCache","$ionicScrollDelegate","config","tableStateService","websocketService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/profit-table/profit-table.template.html",controller:"ProfitTableController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.profit-table.directives").directive("bgProfitTable",e)}(),function(){function e(e,t,n){function a(e,t,n){var a=[],t=t,n=n,e=e;for(var o in e){var r=e[o],i=r.app_id;("allApps"==t||"tickTradeApp"==t&&i===n)&&a.push(r)}return a}return a}return angular.module("binary.pages.profit-table.filters").filter("DataFilter",e),e.$inject=["$filter"],e}(),function(){function e(e,t,n,a){function o(){a.sendRequestFor.getSelfExclusion()}function r(){var e=_.clone(s.data);e.timeout_until&&(e.timeout_until=new Date(e.timeout_until).getTime()/1e3),e.exclude_until&&(e.exclude_until=e.exclude_until.toISOString().slice(0,10)),a.sendRequestFor.setSelfExclusion(e)}function i(){o()}var s=this;s.disableUpdateButton=!0,s.data={},e.$on("get-self-exclusion",function(t,n){e.$applyAsync(function(){s.data=n,s.limits=_.clone(n),s.disableUpdateButton=!1})}),e.$on("get-self-exclusion:error",function(e,t){n.displayError(t),s.disableUpdateButton=!1}),e.$on("set-self-exclusion",function(e,o){t(["self-exclusion.success","self-exclusion.save-prompt"]).then(function(e){n.displayAlert(e["self-exclusion.success"],e["self-exclusion.save-prompt"])}),s.limits=_.clone(s.data),s.disableUpdateButton=!1,(s.data.exclude_until||s.data.timeout_until)&&a.logout()}),e.$on("set-self-exclusion:error",function(e,t){n.displayError(t),s.disableUpdateButton=!1}),s.submit=function(){s.disableUpdateButton=!0,r()},i()}angular.module("binary.pages.self-exclusion.controllers").controller("SelfExclusionController",e),e.$inject=["$scope","$translate","alertService","websocketService"]}(),function(){function e(e){var t=this;t.settings=[{name:"profile.personal_details",url:"profile",scope:"read",forRealAccount:!1},{name:"settings.self-exclusion",url:"self-exclusion",scope:"admin",forRealAccount:!0},{name:"menu.language",url:"language",scope:"read",forRealAccount:!1}],t.checkScope=function(e){return!0},t.checkAccount=function(t){return t?!e.virtuality:!0}}angular.module("binary.pages.settings.controllers").controller("SettingsController",e),e.$inject=["appStateService"]}(),function(){function e(e,t,n,a,o,r,i,s){var c=this;c.showTokenForm=!1,c.showSignin=!1,c.showSignup=!1,c.showvirtualws=!1,c.data={},c.tokenError=!1,c.passwordError=!1,c.ios=ionic.Platform.isIOS(),c.android=ionic.Platform.isAndroid(),c.disableNextbutton=!1;var l=function(){c.language=o.read()};l(),e.$on("authorize",function(e,o,r){n.hide(),o?(a.isUnique(o.loginid)&&(a.add(o),a.setDefault(o.token),s.virtuality=o.is_virtual),c.token="",t.go("trade")):i.accountError.tokenNotAuthenticated(r)}),c.signIn=function(){var e=c.token;e&&15===e.length?(n.show(),r.authenticate(e)):i.accountError.tokenNotValid()},c.changeLanguage=function(){o.update(c.language)},c.verifyUserMail=function(){if(c.emailError=!1,c.data.mail)var e=c.data.mail;else var e="";r.sendRequestFor.accountOpening(e)},e.$on("verify_email",function(t,n){c.userMail=n,1==c.userMail&&(e.$applyAsync(function(){c.emailError=!1}),e.$applyAsync(function(){c.showvirtualws=!0,c.showSignup=!1}))}),e.$on("verify_email:error",function(t,n){e.$applyAsync(function(){c.emailError=!0,c.emailErrorMessage=n.verify_email})}),e.$watch("vm.showSignup",function(){c.showSignup&&r.sendRequestFor.residenceListSend()}),e.$on("residence_list",function(e,t){c.data.residenceList=t}),c.data.inputType="password",c.hideShowPassword=function(){"password"==c.data.inputType?c.data.inputType="text":c.data.inputType="password"},c.createVirtualAccount=function(){c.tokenError=!1,c.passwordError=!1;var e=c.data.verificationCode,t=c.data.clientPassword,n=c.data.residence;r.sendRequestFor.newAccountVirtual(e,t,n)},e.$on("new_account_virtual",function(e,t){if(!s.isLoggedin){var n=t.oauth_token;r.authenticate(n),c.showTokenForm=!1,c.showSignin=!1,c.showSignup=!1,c.showvirtualws=!1}}),e.$on("new_account_virtual:error",function(t,n){e.$applyAsync(function(){n&&(n.hasOwnProperty("details")&&n.details.hasOwnProperty("verification_code")&&(c.tokenError=!0,c.tokenErrorMessage=n.details.verification_code||n.code),n.hasOwnProperty("code")&&"InvalidToken"==n.code&&(c.tokenError=!0,c.tokenErrorMessage=n.message),n.hasOwnProperty("details")&&n.details.hasOwnProperty("client_password")&&(c.passwordError=!0,c.passwordErrorMessage=n.details.client_password||n.code),n.hasOwnProperty("code")&&"PasswordError"==n.code&&(c.passwordError=!0,c.passwordErrorMessage=n.message))})}),c.changeSigninView=function(t){t=t||!1,e.$applyAsync(function(){c.showSignin||c.showSignup||c.showvirtualws||!c.showTokenForm?c.showSignin||!c.showSignup||c.showTokenForm||c.showvirtualws?(c.showSignin||c.showSignup||c.showTokenForm||!c.showvirtualws)&&(c.showSignin||!c.showSignup||c.showTokenForm||c.showvirtualws)?!c.showSignin||c.showSignup||c.showTokenForm||c.showvirtualws||!t||(c.showSignin=!1):(c.showvirtualws=!1,
c.showSignup=!1,c.showSignin=!0):(c.showSignup=!1,c.showSignin=!0):(c.showTokenForm=!1,c.showSignin=!0)})},c.changeSigninViewtoToken=function(){c.showSignin&&!c.showTokenForm&&(c.showTokenForm=!0,c.showSignin=!1)},c.changeSigninViewtoSignup=function(){c.showSignin&&!c.showSignup&&(c.showSignup=!0,c.showSignin=!1)},c.showSigninView=function(){e.$applyAsync(function(){c.showSignin=!0})},e.$watch(function(){return s.isLanguageReady},function(e,t){c.disableNextbutton=!e})}e.$inject=["$scope","$state","$ionicLoading","accountService","languageService","websocketService","alertService","appStateService"],angular.module("binary.pages.signin.controllers").controller("SigninController",e),e.$inejct=["$scope","$state","$ionicLoading","accountService","languageService","websocketService","alertService","appStateService"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l){var u=this;u.data={},u.noTransaction=!1,u.noMore=!1,u.hasRefresh=!1,u.enteredNow=!1,u.ios=ionic.Platform.isIOS(),u.android=ionic.Platform.isAndroid(),u.goToTopButton=!1,u.backFromMainPages=!1,u.firstCompleted=!1,u.noMoreRequest=!1,u.jumpToDateInputShow=!1,u.hasError=!1,u.dateChanged=!1,u.appIdAllowed=i.app_id,e.$on("$stateChangeSuccess",function(e,t,n,a,o){u.lastPage=a.name,u.enteredNow=!0,u.thisPage=t.name,"transactiondetail"!=u.lastPage&&"statement"==u.thisPage&&(u.resetParams(),u.firstCompleted=!1,u.backFromMainPages=!0,u.jumpToDateInputShow=!1,u.notAuthorizeYet())}),e.$on("authorize",function(e,t){l.statementRefresh&&u.notAuthorizeYet()}),u.notAuthorizeYet=function(){l.isLoggedin&&(l.statementRefresh||u.backFromMainPages)&&(o.remove(),u.resetParams(),u.jumpToDateInputShow=!1,u.firstCompleted=!1,u.noMoreRequest=!1,u.hasError=!1,u.filteredTransactions=[],u.noTransaction=!1,u.backFromMainPages=!1,s.statementCompletedGroup=!0,l.statementRefresh=!1,l.isStatementSet=!1,u.hasError=!1,u.loadMore())},u.delayedLoad=function(){n(u.loadMore,50)},u.loadMore=function(){s.statementCompletedGroup?s.statementCompletedGroup&&(s.statementCurrentPage+=1,u.pageState()):u.setBatch()},u.pageState=function(){l.isStatementSet?!l.isStatementSet&&u.enteredNow&&"transactiondetail"==u.lastPage?(u.enteredNow=!1,u.lastPage="",u.setParams()):l.isStatementSet&&u.dateChanged&&s.statementCompletedGroup?(u.transactions=[],u.batchedTransaction=[],u.filteredTransactions=[],u.dateChanged=!1,s.statementCurrentPage=0,s.statementBatchNum=0,s.statementBatchLimit=0,s.statementCompletedGroup=!1,u.setParams(),u.goTop()):l.isStatementSet&&!u.dateChanged&&s.statementCompletedGroup?(u.transactions=[],s.statementCompletedGroup=!1,u.setParams()):u.dateChanged||(u.setParams(),e.$applyAsync(function(){u.noMore=!1})):(l.isStatementSet=!0,s.statementDateType="allTime",u.jumpToDateInputShow=!1,u.resetParams(),u.setParams(),s.statementCompletedGroup=!1,u.goTop()),u.sendRequest()},u.setParams=function(){u.data.appID=s.statementAppID,u.data.dateType=s.statementDateType,u.data.dateFrom=s.statementDateFrom,u.data.dateTo=s.statementDateTo,u.data.statementCurrentPage=s.statementCurrentPage,u.itemsPerPage=300,u.limit=u.itemsPerPage+1},u.resetParams=function(){s.statementAppID="allApps",s.statementDateFrom="",s.statementDateTo="",s.statementCurrentPage=0,u.transactions=[],u.batchedTransaction=[],s.statementCompletedGroup=!0,s.statementBatchNum=0,s.statementBatchLimit=0},u.sendRequest=function(){u.params={description:1,limit:u.limit,offset:u.itemsPerPage*u.data.statementCurrentPage},u.data.hasOwnProperty("dateFrom")&&""!=u.data.dateFrom&&(u.params.date_from=u.data.dateFrom),u.data.hasOwnProperty("dateTo")&&""!=u.data.dateTo&&(u.params.date_to=u.data.dateTo+86400),u.params.req_id=u.data.dateTo||Math.round((new Date).getTime()/1e3),u.reqId=u.params.req_id,c.sendRequestFor.statement(u.params)},e.$on("statement:update",function(t,n,a){u.firstCompleted=!0,u.statement=n,u.count=u.statement.count,u.hasError=!1,u.reqId==a&&(0==u.count?(u.noTransaction=!0,e.$applyAsync(function(){u.noMore=!0}),u.setBatch()):u.count>0&&(u.count<u.limit?(u.noTransaction=!1,u.noMoreRequest=!0,u.statement.transactions.forEach(function(e,t){u.transactions.push(u.statement.transactions[t])}),u.setBatch()):u.count==u.limit&&(u.noTransaction=!1,e.$applyAsync(function(){u.noMore=!1}),u.statement.transactions.forEach(function(e,t){t<u.count-1&&u.transactions.push(u.statement.transactions[t])}),u.setBatch())))}),e.$on("statement:error",function(t,n){e.$applyAsync(function(){u.hasError=!0,u.errorMessage=n})}),u.setBatch=function(){s.statementBatchLimit=Math.ceil(u.transactions.length/s.statementBatchSize),u.sliced=[],u.sliced=u.transactions.slice(s.statementBatchNum*s.statementBatchSize,(s.statementBatchNum+1)*s.statementBatchSize),u.sliced.forEach(function(e,t){u.batchedTransaction.push(u.sliced[t])}),s.statementBatchNum=s.statementBatchNum+1,s.statementBatchNum==s.statementBatchLimit&&(s.statementBatchLimit=0,s.statementBatchNum=0,s.statementCompletedGroup=!0,u.noMoreRequest&&e.$applyAsync(function(){u.noMore=!0})),u.setFiltered()},u.setFiltered=function(){e.$applyAsync(function(){s.statementAppID=u.data.appID,u.filteredTransactions=t("StatementDataFilter")(u.batchedTransaction,s.statementAppID,u.appIdAllowed),0==u.filteredTransactions.length?u.noTransaction=!0:u.noTransaction=!1,e.$broadcast("scroll.infiniteScrollComplete")})},u.dateFilter=function(){u.noTransaction=!1,u.dateChanged=!0,s.statementDateType=u.data.dateType,"allTime"==u.data.dateType&&(e.$applyAsync(function(){u.jumpToDateInputShow=!1}),s.statementCompletedGroup=!0,u.firstCompleted=!1,u.data.dateTo="",s.statementDateFrom="",s.statementDateTo="",u.loadMore()),"jumpToDate"==u.data.dateType&&(e.$applyAsync(function(){u.jumpToDateInputShow=!0}),s.statementCompletedGroup=!0,u.firstCompleted=!1,u.nowDateInputLimit=t("date")(new Date,"yyyy-MM-dd"),document.getElementById("statement-dateTo").setAttribute("max",u.nowDateInputLimit),document.getElementById("statement-dateTo").value=u.nowDateInputLimit,u.jumpToDateFilter())},u.jumpToDateFilter=function(){"jumpToDate"==s.statementDateType&&(s.statementCompletedGroup=!0,u.dateChanged=!0,u.noTransaction=!1,u.firstCompleted=!1,s.statementCurrentPage=0,u.data.dateTo=new Date(u.data.end).getTime()/1e3||"",s.statementDateTo=u.data.dateTo,u.loadMore())},u.goTop=function(){r.scrollTop(!0)},u.goToTopButtonCondition=function(){e.$applyAsync(function(){n(function(){r.$getByHandle("handler").getScrollPosition().top>=30?u.goToTopButton=!0:r.$getByHandle("handler").getScrollPosition().top<30&&(u.goToTopButton=!1)},500)})},u.sendContractDetailRequest=function(e){e&&(u.id=e,sessionStorage.setItem("id",u.id),a.go("transactiondetail"))}}angular.module("binary.pages.statement.controllers").controller("StatementController",e),e.$inject=["$scope","$filter","$timeout","$state","$templateCache","$ionicScrollDelegate","config","tableStateService","websocketService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/statement/statement.template.html",controller:"StatementController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.statement.directives").directive("bgStatement",e)}(),function(){function e(e,t,n){function a(e,t,n){var a=[],t=t,n=n,e=e;for(var o in e){var r=e[o],i=r.app_id;("allApps"==t||"tickTradeApp"==t&&i===n)&&a.push(r)}return a}return a}return angular.module("binary.pages.statement.filters").filter("StatementDataFilter",e),e.$inject=["$filter"],e}(),function(){function e(e,t,n,a,o){var r=this;e.$on("get_settings",function(e,n){r.clientTncStatus=n.client_tnc_status,r.termsConditionsVersion=localStorage.getItem("termsConditionsVersion"),o.virtuality||r.clientTncStatus===r.termsConditionsVersion||t.go("acceptTermsAndConditions")})}angular.module("binary.pages.terms-and-conditions.controllers").controller("TermsAndConditionsController",e),e.$inject=["$scope","$state","websocketService","accountService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/terms-and-conditions/terms-and-conditions.template.html",controller:"TermsAndConditionsController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.terms-and-conditions.directives").directive("bgTermsAndConditions",e)}(),function(){function e(e,t){function n(){var e={subscribe:1,proposal:1,symbol:null,contract_type:null,duration:null,basis:"payout",currency:sessionStorage.currency||"USD",amount:5,duration_unit:"t",passthrough:null};return e}function a(e){return _.forEach(e,function(t,n){null==t&&delete e[n]}),!0}var o={};return o.get=function(){if(_.isEmpty(localStorage.options))return n();var e=JSON.parse(localStorage.options),t=n();return t.symbol=e.underlying.symbol,t.duration=e.tick,"Higher/Lower"===e.tradeType?t.barrier=_.isEmpty(e.barrier)?"":e.barrier:t.barrier=e.digit,t.tradeType=e.tradeType,t.amount=e.amount||t.amount,t.basis=e.basis||t.basis,t.currency=sessionStorage.currency||"USD",t},o.save=function(e){localStorage.options=JSON.stringify(e)},o.setPropertyValue=function(t,n){var a=JSON.parse(localStorage.options);a[t]=n,localStorage.options=JSON.stringify(a),e.$broadcast("options:updated",a)},o.update=function(e){var t=o.get();return t.symbol=e.underlying.symbol,t.duration=e.tick,"Higher/Lower"===e.tradeType?t.barrier=_.isEmpty(e.barrier)?"":e.barrier:t.barrier=e.digit,t.tradeType=e.tradeType,t.amount=e.amount||t.amount,t.basis=e.basis||t.basis,o.save(e),t},o.send=function(e){delete e.tradeType,a(e)&&t.sendRequestFor.proposal(e)},o.forget=function(){t.sendRequestFor.forgetProposals()},o.purchase=function(e){t.sendRequestFor.purchase(e.id,e.ask_price),o.forget()},o}angular.module("binary.pages.trade.services").factory("proposalService",e),e.$inject=["$rootScope","websocketService"]}(),function(){function e(e,t,n,a,o){function r(){i.proposal=t.get()}var i=this;i.proposal={},i.purchasedContract={},r(),angular.element(document).ready(function(){function e(e){var t=document.getElementById("trade-container");void 0!==t&&null!==t&&(t.className="")}function t(e){var t=document.getElementById("trade-container");void 0!==t&&null!==t&&(t.className="flexed")}ionic.Platform.isIOS()&&(document.getElementById("trade-container").style.paddingBottom="20px"),window.addEventListener("native.keyboardshow",e),window.addEventListener("native.keyboardhide",t)})}angular.module("binary.pages.trade.controllers").controller("TradeController",e),e.$inject=["$scope","proposalService","tradeService","websocketService","alertService"]}(),function(){function e(){var e={};return e.proposalIsReady=!1,e}angular.module("binary.pages.trade.services").factory("tradeService",e)}(),function(){function e(e,t,n,a,o,r){var i=this;i.currency=sessionStorage.getItem("currency"),i.data={},i.data.id=sessionStorage.getItem("id"),i.data.extraParams={req_id:i.data.id},i.sendDetailsRequest=function(){o.isLoggedin?r.sendRequestFor.openContract(i.data.id,i.data.extraParams):t(i.sendDetailsRequest,500)},e.$on("proposal:open-contract",function(t,n,a){i.proposalOpenContract=n,i.data.reqId=a,i.data.reqId==i.data.id&&e.$applyAsync(function(){i.contract=i.proposalOpenContract})}),i.sendDetailsRequest()}angular.module("binary.pages.transaction-detail.controllers").controller("TransactionDetailController",e),e.$inject=["$scope","$timeout","$interval","$state","appStateService","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/transaction-detail/transaction-detail.template.html",controller:"TransactionDetailController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.transaction-detail.directives").directive("bgTransactionDetail",e)}(),function(){function e(e,t,n){function a(){o()}function o(){e({method:"GET",url:"versions.json"}).then(function(e){e.data&&t.$applyAsync(function(){i.showSpinner=!1;var t=e.data;i.lastVersion=t.pop(),r()})},function(e){i.versions=null,console.log(e)})}function r(){var e=n.read();i.platform="appstore",ionic.Platform.isAndroid()&&(i.platform="googleplay"),i.storeLogo="img/"+i.platform+"/"+e+".svg"}var i=this;i.storeLogo=null,i.lastVersion=null,i.showSpinner=!0,i.platform=null,i.openExternal=function(e){return window.open(e.currentTarget.href,"_system"),!1},a()}angular.module("binary.pages.update.controllers").controller("UpdateController",e),e.$inject=["$http","$scope","languageService"]}(),angular.module("binary").service("accountService",["websocketService","appStateService","delayService",function(e,t,n){this.addedAccount="";var a=function(e,t,n){var a=-1;return e.forEach(function(o,r){e[r][t]===n&&(a=r)}),a},o=function(){return localStorage.accounts&&JSON.parse(localStorage.accounts)instanceof Array};this.getAll=function(){return o()?JSON.parse(localStorage.accounts):[]},this.removeAll=function(){localStorage.removeItem("accounts")};var r=function(t,o){if(n.remove("symbolsAndAssetIndexUpdate"),t)e.authenticate(t,o);else{var r=this.getAll(),i=a(r,"is_default",!0);if(i>-1){var s=r[i].token;e.authenticate(s,o)}}};this.validate=function(e,t){if(!e){var n=this.getAll(),o=a(n,"is_default",!0);o>-1&&(e=n[o].token)}r(e,t)},this.add=function(e){var t={id:e.loginid,token:e.token,currency:e.currency||"USD",email:e.email,is_default:!1},n=this.getAll();_.find(n,["id",t.id])||(n.push(t),localStorage.accounts=JSON.stringify(n))},this.remove=function(e){var t=this.getAll(),n=a(t,"token",e);n>-1&&t[n].is_default!==!0&&(t.splice(n,1),localStorage.accounts=JSON.stringify(t))},this.setDefault=function(e){var t=this.getAll(),n=a(t,"token",e);n>-1&&(t.forEach(function(n,a){t[a].is_default=t[a].token===e?!0:!1}),localStorage.accounts=JSON.stringify(t))},this.hasDefault=function(){var e=this.getAll(),t=a(e,"is_default",!0);return t>-1?!0:!1},this.getDefault=function(){var e=this.getAll(),t=a(e,"is_default",!0);return e[t]},this.isUnique=function(e){var t=this.getAll(),n=a(t,"id",e);return n>-1?!1:!0},this.checkScope=function(e){var n=_.concat([],e),a=!1;if(t.isLoggedin&&!_.isEmpty(t.scopes)){a=!0;for(var o in n)if(t.scopes.indexOf(n[o].toLowerCase())<0){a=!1;break}}return a}}]),angular.module("binary").service("alertService",["$translate","$ionicPopup","$rootScope",function(e,t,n){var a=function(e,n){if(void 0===navigator.notification){t.alert({title:e,template:n})}else navigator.notification.alert(n,null,e,"OK")},o=function(e,n,a,o){if(void 0===navigator.notification){var r=t.confirm({title:e,template:n});r.then(o)}else navigator.notification.confirm(n,o,e,a)};this.displayRealitCheckInterval=function(e,n,a,o,r,i){var s=t.show({title:e,cssClass:n,scope:a,templateUrl:o,buttons:r});s.then(i)},this.displayRealityCheckResult=function(e,n,a,o,r,i){var s=t.show({title:e,cssClass:n,scope:a,templateUrl:o,buttons:r});s.then(i)},this.displayError=function(t){e(["alert.error"]).then(function(e){a(e["alert.error"],t)})},this.displaySymbolWarning=function(t,n){e(["alert.warning",t]).then(function(e){a(e["alert.warning"],e[t])})},this.accountError={tokenNotValid:function(){e(["alert.error","alert.not_valid"]).then(function(e){a(e["alert.error"],e["alert.not_valid"])})},tokenNotAuthenticated:function(t){e(["alert.error","alert.not_auth"]).then(function(e){a(e["alert.error"],t?t:e["alert.not_auth"])})},tokenNotUnique:function(){e(["alert.error","alert.not_unique"]).then(function(e){a(e["alert.error"],e["alert.not_unique"])})}},this.contractError={notAvailable:function(){e(["alert.error","alert.contract_error"]).then(function(e){a(e["alert.error"],e["alert.contract_error"])})}},this.optionsError={noTick:function(){e(["alert.error","alert.no_tick"]).then(function(e){a(e["alert.error"],e["alert.no_tick"])})}},this.displayAlert=function(e,t){a(e,t)},this.confirmAccountRemoval=function(t){e(["alert.remove_token_title","alert.remove_token_content"]).then(function(e){o(e["alert.remove_token_title"],e["alert.remove_token_content"],["Yes","No"],function(e){"boolean"!=typeof e&&(1==e||(e=!1)),e&&n.$broadcast("token:remove",t)})})},this.confirmRemoveAllAccount=function(t){e(["alert.remove_all_tokens_title","alert.remove_all_tokens_content"]).then(function(e){o(e["alert.remove_all_tokens_title"],e["alert.remove_all_tokens_content"],["Yes","No"],t)})},this.confirmExit=function(t){e(["app.exit_title","app.exit_confirmation"]).then(function(e){o(e["app.exit_title"],e["app.exit_confirmation"],["Yes","No"],t)})}}]),angular.module("binary").factory("analyticsService",["accountService",function(e){var t={};return t.google={addUser:function(){var t=e.getDefault(),n=t&&t.id?t.id:null;window.ga.setUserId(n)},trackView:function(e){"undefined"!=typeof ga&&(this.addUser(),ga.trackView(e))},trackEvent:function(e,t,n,a){"undefined"!=typeof ga&&(this.addUser(),ga.trackEvent(e,t,n,a))}},t.amplitude={logEvent:function(e,t){"undefined"!==amplitude&&amplitude.logEvent(e,t)}},t}]),angular.module("binary").factory("appStateService",function(){var e={};return e.tradeMode=!0,e.purchaseMode=!1,e.isLoggedin=!1,e.waitForProposal=!1,e.scopes=[],e.invalidTokenRemoved=!1,e.isChangedAccount=!1,e.isRealityChecked=!1,e.isPopupOpen=!1,e.hasGetResidence=!1,e.showForm=!1,e.isCheckedAccountType=!1,e.isNewAccountReal=!1,e.isNewAccountMaltainvest=!1,e.hasMLT=!1,e.isProfitTableSet=!1,e.profitTableRefresh=!1,e.isStatementSet=!1,e.statementRefresh=!1,e.virtuality=0,e.newAccountAdded=!1,e.isLanguageReady=!1,e}),angular.module("binary").factory("appVersionService",["$http",function(e){function t(){return e.get("js/config.json")}var n={};return n.getAppVersion=t,n}]),angular.module("binary").factory("chartService",["$rootScope",function(e){var t,n,a,o=[],r=function(e){return a.tickCount-1-e},i=function(e){var t=Math.ceil(a.tickCount/a.minTickCount);return r(e)%t===0?!0:!1},s=function(){a={chartJS:null,capacity:600,maxTickCount:50,hideLabelsThreshold:15,tickCount:15,minTickCount:5,chartData:{labels:[],labelsFilter:function(e){return!i(e)},datasets:[{strokeColor:"#7cb5ec",pointColor:"#7cb5ec",pointStrokeColor:"#7cb5ec",data:[]}]},chartOptions:{animation:!1,bezierCurve:!1,datasetFill:!1,showTooltips:!1,keepAspectRatio:!1,scaleShowLabels:!1,pointDotRadius:3,datasetStrokeWidth:2}}};s();var c={zeroPad:function(e){return 10>e?"0"+e:e.toString()},getTickTime:function(e){var t=new Date(1e3*e);return t.getUTCHours()+":"+c.zeroPad(t.getUTCMinutes())+":"+c.zeroPad(t.getUTCSeconds())},isDefined:function(e){return"undefined"==typeof e||null===e?!1:!0},setObjValue:function(e,t,n,a){c.isDefined(e)&&(c.isDefined(a)?a&&(e[t]=n):"undefined"==typeof e[t]&&(e[t]=n))},fractionalLength:function(e){var t=e.toString(),n=t.indexOf(".");return t.length-n-1},maxFractionalLength:function(e){var t=0;return e.forEach(function(e){t=t<c.fractionalLength(e)?c.fractionalLength(e):t}),t},lastDigit:function(e){return parseInt(e.toString().slice(-1)[0])},average:function(e){var t=c.fractionalLength(e[0])+1;return parseFloat(e.reduce(function(e,t){return e+t},0)/e.length).toFixed(t)},conditions:{CALL:function(e,t){return parseFloat(t)>parseFloat(e)},PUT:function(e,t){return parseFloat(t)<parseFloat(e)},CALLHL:function(e,t){return parseFloat(t)>parseFloat(e)},PUTHL:function(e,t){return parseFloat(t)<parseFloat(e)},DIGITMATCH:function(e,t){return c.lastDigit(e)===c.lastDigit(t)},DIGITDIFF:function(e,t){return c.lastDigit(e)!==c.lastDigit(t)},DIGITEVEN:function(e,t){return c.lastDigit(t)%2===0},DIGITODD:function(e,t){return c.lastDigit(t)%2!==0},DIGITUNDER:function(e,t){return c.lastDigit(t)<parseInt(e)},DIGITOVER:function(e,t){return c.lastDigit(t)>parseInt(e)},ASIANU:function(e,t,n){var a=c.average(n);return parseFloat(t)>a},ASIAND:function(e,t,n){var a=c.average(n);return parseFloat(t)<a}},digitTrade:function(e){return 0===e.type.indexOf("DIGIT")?!0:!1},asianGame:function(e){return 0===e.type.indexOf("ASIAN")?!0:!1},higherLowerTrade:function(e){return["PUTHL","CALLHL"].indexOf(e.type)>-1&&!_.isEmpty(e.barrier)?!0:!1},getRelativeIndex:function(e,t){return e-(n.getCapacity()-(n.getTickCount()+n.getDataIndex()))},getAbsoluteIndex:function(e,t){return e+(n.getCapacity()-(n.getTickCount()+n.getDataIndex()))}},l=function(){var e=0,t=0,n=0,a=!1,o=0,r=function(e,o){t=o,n=e,a=!0},i=function(o,r){return a?n+Math.floor((r-t)/e)-o:0},s=function(t,n){null!==t&&(e=Math.ceil(t.offsetWidth/n))},c=function(){return e},l=function(e,t){return e.timeStamp-o>100?(o=e.timeStamp,!0):!1},u=function(){a=!1};return{isStep:l,stop:u,setDistance:s,getDistance:c,setStartPosition:r,stepCount:i}},u=function(e){var t=[],n=function(e){parseInt(e.epoch)>parseInt(t.slice(-1)[0].time)&&(t.push({time:e.epoch,price:e.quote}),t.shift())},a=function(e,t){var n=t.times,a=t.prices,o=function(e,t){var n=parseInt(e.time),a=parseInt(t.time);return a>n?-1:n>a?1:0},r=[];n.forEach(function(t,n){r.indexOf(t)<0&&(r.push(t),e.push({time:t,price:a[n]}))}),n.sort(o)},o=function(e){t=[],a(t,e)},r=function(n,a,o){var r=e-n,i=r-a;o(i>=0?t.slice(i,r):[])};return{getHistory:r,addTick:n,addHistory:o}},d=function(t){var a=!0,r=[],i=function(){return a=!1},s=function(){return a},l=function(){return c.isDefined(t.exitSpot)},u=function(){return t},d=function(){t.showingEntrySpot=!1,t.showingExitSpot=!1},p=function(){return c.isDefined(t.entrySpotIndex)?!0:!1},m=function(){return c.isDefined(t.exitSpotIndex)?!0:!1},g=function(e){return p()&&e>=t.entrySpotTime&&(!m()||e<=t.exitSpot)?!0:!1},h=function(e){return t.showingEntrySpot&&t.entrySpotIndex===c.getAbsoluteIndex(e)?!0:t.showingExitSpot&&t.exitSpotIndex===c.getAbsoluteIndex(e)?!0:!1},f=function(e){var n;return t.showingEntrySpot&&(n=e[c.getRelativeIndex(t.entrySpotIndex)]),n},y=function(e){var n;return t.showingExitSpot&&(n=e[c.getRelativeIndex(t.exitSpotIndex)]),n},v=function(e){return p()?e===t.entrySpotTime?!0:!1:e>=t.startTime?!0:!1},b=function(e,n){return m()?e===t.exitSpot?!0:!1:p()&&n===t.entrySpotIndex+t.duration?!0:!1},S=function(e,a){v(a)?(t.showingEntrySpot=!0,c.digitTrade(t)||c.asianGame(t)||m()?c.asianGame(t)&&r.length>0&&!m()&&n.addGridLine({color:"#2E8836",label:"Average: "+c.average(r),orientation:"horizontal",type:"average",firstIndex:e,index:e+(r.length-1)}):n.addGridLine({color:"#2E8836",label:"barrier: "+t.barrier,orientation:"horizontal",type:"barrier",index:e})):b(a,c.getAbsoluteIndex(e))&&(t.showingExitSpot=!0)},_=function(e,n,a){if(v(n)||g(n)){if(v(n)){var o=a;c.higherLowerTrade(t)&&(t.offset=t.offset||t.barrier,o=Number(a)+Number(t.offset),o=o.toFixed(c.fractionalLength(a))),c.setObjValue(t,"barrier",o,!c.digitTrade(t)),c.setObjValue(t,"entrySpotPrice",a,!0),c.setObjValue(t,"entrySpotTime",n,!p())}else b(n,e)&&c.setObjValue(t,"exitSpot",n,!m());c.setObjValue(t,"entrySpotIndex",e,v(n)),c.setObjValue(t,"exitSpotIndex",e,b(n,e))}},w=function(){if(p()){var e="win"===t.result?"rgba(0, 255, 0, 0.1)":"rgba(255, 0, 0, 0.1)";if(t.showingExitSpot){var a=c.getRelativeIndex(t.entrySpotIndex);a=0>a?0:a,c.isDefined(t.region)?(t.region.color=e,t.region.start=a):t.region={color:e,start:a},t.region.end=c.getRelativeIndex(t.exitSpotIndex),n.addRegion(t.region)}else t.showingEntrySpot?(c.isDefined(t.region)?(t.region.color=e,t.region.start=c.getRelativeIndex(t.entrySpotIndex)):t.region={color:e,start:c.getRelativeIndex(t.entrySpotIndex)},n.addRegion(t.region)):n.removeRegion(t.region)}},k=function(n,s){p()&&a&&(0===r.length&&t.entrySpotTime!=n&&g(n)?(r.push(parseFloat(t.entrySpotPrice)),c.conditions[t.type](t.barrier,t.entrySpotPrice,r)?t.result="win":t.result="lose",e.$broadcast("contract:spot",t,t.entrySpotPrice)):r.push(parseFloat(s)),g(n)&&(c.conditions[t.type](t.barrier,s,r)?t.result="win":t.result="lose",e.$broadcast("contract:spot",t,s),l()&&a&&(r=[],o.forEach(function(e,n){var a=e.getContract();t===a||e.isFinished()||i()}),a&&e.$broadcast("contract:finished",t),i())))};return{getBroadcastable:s,setNotBroadcastable:i,isFinished:l,getContract:u,isSpot:h,betweenExistingSpots:g,resetSpotShowing:d,addSpots:_,addRegions:k,viewSpots:S,viewRegions:w,getEntrySpotPoint:f,getExitSpotPoint:y}},p=function(){var e,n,i=0,p=!1,m=!1,g=l(),h=function(e){return 0===r(e)?!0:!1},f=function(){return a.tickCount>=a.hideLabelsThreshold?!0:!1},y=function(){return 0===i?!1:!0},v=function(e){var t="black";return!y()&&h(e)&&(t="#2E8836"),o.forEach(function(n){n.isSpot(e)&&(t="#818183")}),t},b=function(e,t){var n;return o.forEach(function(t){t.betweenExistingSpots(e)&&(n="#7cb5ec")}),c.isDefined(n)?n:n=h(t)&&!y()?"#2E8836":"#7cb5ec"},S=function(e,t){var a,o,r,i=e.scale.endPoint-e.scale.startPoint+12;r=e.datasets[0].points[t.start].x,o=c.isDefined(t.end)?e.datasets[0].points[t.end].x:e.datasets[0].points.slice(-1)[0].x,r>=o||(a=o-r,n.fillStyle=t.color,n.fillRect(r,e.scale.startPoint-12,a,i))},_=function(e,t){return{width:e.measureText(t.value).width,height:parseInt(e.font)}},w=function(e,t){return e.s<t.e&&e.e>t.s||t.s<e.e&&t.e>e.s},k=function(e,t){var a=_(n,e),o=_(n,t),r=w({s:e.y,e:e.y+a.height},{s:t.y,e:t.y+o.height}),i=w({s:e.x,e:e.x+a.width},{s:t.x,e:t.x+o.width});return i&&r},C=function(e){var t=[],n=[];return o.forEach(function(a){var o,r;o=a.getEntrySpotPoint(e),r=a.getExitSpotPoint(e),c.isDefined(o)&&t.push(o),c.isDefined(r)&&n.push(r)}),{entries:t,exits:n}},T=function(e,t){var n=!0;return e.forEach(function(e,a){k(e,t)&&(n=!1)}),n},E=function(e){var t=[],n=C(e);n.exits.forEach(function(e,n){t.push(e)}),n.entries.forEach(function(e,n){T(t,e)&&t.push(e)});var a=e.slice(-1)[0];if(!y()&&T(t,a)&&t.push(a),!f())for(var o=e.length-1;o>=0;o--)T(t,e[o])&&t.push(e[o]);t.forEach(function(e,t){e.shown=!0})},N=function(e,t){if(0!==t&&c.isDefined(e.shown)&&e.shown){n.fillStyle=v(t),n.textAlign="center",n.textBaseline="bottom";var a=0,o=_(n,e).width;h(t)&&(a=45>o?0:o-45),n.fillText(e.value,e.x-a,e.y-1)}},A=function(e,t){var a=e.datasets[0].points[t.index],o=e.scale;if(n.beginPath(),"vertical"===t.orientation)n.moveTo(a.x,o.startPoint+24),n.strokeStyle=t.color,n.fillStyle=t.color,n.lineTo(a.x,o.endPoint),n.stroke(),n.textAlign="center",n.fillText(t.label,a.x,o.startPoint+12);else if("horizontal"===t.orientation){var r=a.y;if("average"===t.type&&t.index!==t.firstIndex){var i=e.datasets[0].points[t.firstIndex];r=(i.y+a.y)/2}n.moveTo(o.startPoint,r),n.strokeStyle=t.color,n.fillStyle=t.color,n.lineTo(e.chart.width,r),n.stroke(),n.textAlign="center";var s=n.measureText(t.label).width;n.fillText(t.label,parseInt(s/2)+5,r-1)}};Chart.CustomScale=Chart.Scale.extend({initialize:function(){var e=function(e,t,n){e.font=t;var a=0;return Chart.helpers.each(n,function(t){var n=e.measureText(t).width;a=n>a?n:a}),a};this.calculateXLabelRotation=function(){this.ctx.font=this.font;var t=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=t/2+3,this.xLabelRotation=0,this.display){var n=e(this.ctx,this.font,this.xLabels);this.xLabelWidth=n}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding;this.xScalePaddingLeft=0},Chart.Scale.prototype.initialize.apply(this,arguments)},draw:function(){var e=Chart.helpers,t=e.each,n=e.aliasPixel,a=this.ctx,o=(this.endPoint-this.startPoint)/this.steps,r=Math.round(this.xScalePaddingLeft);this.display&&(a.fillStyle=this.textColor,a.font=this.font,t(this.yLabels,function(t,n){var i=this.endPoint-o*n,s=Math.round(i);a.textAlign="right",a.textBaseline="middle",this.showLabels&&a.fillText(t,r-10,i),a.beginPath(),n>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),s+=e.aliasPixel(a.lineWidth),a.moveTo(r,s),a.lineTo(this.width,s),a.stroke(),a.closePath(),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(r-5,s),a.lineTo(r,s),a.stroke(),a.closePath()},this),t(this.xLabels,function(e,t){var o=!1;"function"==typeof this.labelsFilter&&this.labelsFilter(t)&&(o=!0);var r=this.calculateX(t)+n(this.lineWidth),i=this.calculateX(t-(this.offsetGridLines?.5:0))+n(this.lineWidth);a.beginPath(),t>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),a.moveTo(i,this.endPoint),a.lineTo(i,this.startPoint-12),a.stroke(),a.closePath(),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(i,this.endPoint),o?a.lineTo(i,this.endPoint):a.lineTo(i,this.endPoint+5),a.stroke(),a.closePath(),a.save(),a.translate(r,this.endPoint+8),a.textAlign="center",a.textBaseline="top",o||a.fillText(e,0,0),a.restore()},this))}}),Chart.types.Line.extend({name:"LineChartSpots",initialize:function(e){this.options.labelsFilter=e.labelsFilter||null,Chart.types.Line.prototype.initialize.apply(this,arguments)},draw:function(){var e=this.datasets[0],t=this;e.points.forEach(function(e,t){e.fillColor=b(a.chartData.epochLabels[t],t)}),Chart.types.Line.prototype.draw.apply(this,arguments),E(e.points),e.points.forEach(function(e,t){N(e,t)}),c.isDefined(this.options.regions)&&this.options.regions.forEach(function(e){S(t,e)}),c.isDefined(this.options.gridLines)&&this.options.gridLines.forEach(function(e){A(t,e)})},buildScale:function(e){var t=Chart.helpers,n=this,a=function(){var e=[];return n.eachPoints(function(t){e.push(t.value)}),e},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,labelsFilter:this.options.labelsFilter,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var n=t.calculateScaleRange(a(),e,this.fontSize,this.beginAtZero,this.integersOnly);t.extend(this,n)},xLabels:e,font:t.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&t.extend(o,{calculateYRange:t.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new Chart.CustomScale(o)}});var $=function(){a.chartJS.destroy(),s(),e=null,n=null,i=0,p=!1,m=!1,g=null},P=function(t){e=document.getElementById(t),null!==e&&(n=e.getContext("2d"),g=l(),g.setDistance(e,a.tickCount))},I=function(e){return c.isDefined(a.chartOptions.regions)?a.chartOptions.regions.indexOf(e):-1},O=function(e){c.isDefined(a.chartOptions.regions)||(a.chartOptions.regions=[]),I(e)<0&&a.chartOptions.regions.push(e)},x=function(e){var t=I(e);t>=0&&a.chartOptions.regions.splice(t,1)},L=function(e){g.setStartPosition(i,e.center.x),p=!0},R=function(e){m||K(g.stepCount(i,e.center.x)),g.stop(),p=!1},D=function(){m=!0},M=function(){m=!1},F=function(e){c.isDefined(a.chartOptions.gridLines)||(a.chartOptions.gridLines=[]),a.chartOptions.gridLines.push(e)},j=function(e,t){if(a.chartData.labels=[],a.chartData.epochLabels=e,e.forEach(function(e,t){a.chartData.labels.push(c.getTickTime(e))}),a.chartData.datasets[0].data=t,c.isDefined(a.chartJS)&&a.chartJS.destroy(),c.isDefined(n)){var o=new Chart(n);a.chartJS=o.LineChartSpots(a.chartData,a.chartOptions)}},U=function(e){a.chartOptions.gridLines=[],o.forEach(function(e){e.resetSpotShowing()});var t=[],n=[];e.forEach(function(e,a){var r=parseInt(e.time);o.forEach(function(e){e.viewSpots(a,r)}),t.push(r),n.push(e.price)}),o.forEach(function(e){e.viewRegions()}),j(t,n)},B=function(e){var t,n;e.forEach(function(e,a){var r=parseInt(e.time),i=e.price;o.forEach(function(e){e.addSpots(a,r,i)}),t=parseInt(e.time),n=e.price}),o.forEach(function(e){e.addRegions(t,n)})},q=function(e){c.isDefined(t)&&(t.addTick(e),t.getHistory(0,a.capacity,B),0!==i||p||m?K(1,!1):t.getHistory(i,a.tickCount,U))},V=function(e){c.isDefined(t)||(t=u(a.capacity)),t.addHistory(e),t.getHistory(0,a.capacity,B),t.getHistory(i,a.tickCount,U);
},z=function(e){},G=function(e){},W=function(n){var o,r;if("in"===n)o=parseInt(a.tickCount/1.2),r=o>a.minTickCount;else{if("out"!==n)return;o=parseInt(1.2*a.tickCount),r=o<a.maxTickCount}r&&(a.tickCount=o,t.getHistory(i,a.tickCount,U),g.setDistance(e,a.tickCount))},J=function(){W("out")},H=function(){W("in")},K=function(e,n){if(0!==e){var o=i+e;0>o?o=0:o>=a.capacity-a.tickCount&&(o=a.capacity-a.tickCount-1),o!==i&&(i=o,(!c.isDefined(n)||n)&&t.getHistory(i,a.tickCount,U))}},Y=function(e){!m&&g.isStep(e,a.tickCount)&&K(g.stepCount(i,e.center.x))},Q=function(){return a.capacity},X=function(){return a.tickCount},Z=function(){return i},ee=function(e){e&&((c.digitTrade(e)||c.asianGame(e))&&(e.duration-=1),o.push(d(e)),i=0)},te={addTick:q,addHistory:V,addCandles:z,addOhlc:G};return{dragStart:L,dragEnd:R,zoomIn:H,zoomOut:J,zoomStart:D,zoomEnd:M,dragRight:Y,dragLeft:Y,getCapacity:Q,getTickCount:X,getDataIndex:Z,addContract:ee,historyInterface:te,addGridLine:F,addRegion:O,removeRegion:x,drawChart:P,destroy:$}},m=function(e){n.drawChart(e)},g=function(){n.destroy(),o.forEach(function(e,t){e.setNotBroadcastable()}),t=null};return n=p(),{destroy:g,drawChart:m,dragStart:n.dragStart,dragEnd:n.dragEnd,zoomIn:n.zoomIn,zoomOut:n.zoomOut,zoomStart:n.zoomStart,zoomEnd:n.zoomEnd,dragRight:n.dragRight,dragLeft:n.dragLeft,getCapacity:n.getCapacity,addContract:n.addContract,historyInterface:n.historyInterface}}]),angular.module("binary").service("cleanupService",["$translate","proposalService",function(e,t){this.run=function(){t.forget()}}]),angular.module("binary").factory("delayService",function(){var e={},t={},n=function(e,n,a){var o=0;return{run:function(r){var i=function(){t[a]=(new Date).getTime(),e.apply(this,n)};0!==r?o=setTimeout(function(){i()},r):i()},cancel:function(){clearTimeout(o)}}};return{update:function(a,o,r,i){var s=(new Date).getTime();if(e.hasOwnProperty(a)){var c=r-(s-t[a]);r=c>0?c:0,e[a].cancel()}else r=0,t[a]=s;e[a]=n(o,i,a),e[a].run(r)},remove:function(n){e.hasOwnProperty(n)&&(e[n].cancel(),delete e[n],delete t[n])}}}),angular.module("binary").service("languageService",["$rootScope","$translate","cleanupService",function(e,t,n){this.update=function(e){localStorage.language=e,this.set(e)},this.set=function(a){if(a)var o=a;else var o=localStorage.language||"en";n.run(),e.$broadcast("language:updated"),t.use(o)},this.read=function(){var e=localStorage.language;return e?e:"en"},this.remove=function(){localStorage.removeItem("language"),n.run()};var a={ab:{name:"Abkhaz",nativeName:"аҧсуа"},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:"አማርኛ"},ar:{name:"Arabic",nativeName:"العربية"},an:{name:"Aragonese",nativeName:"Aragonés"},hy:{name:"Armenian",nativeName:"Հայերեն"},as:{name:"Assamese",nativeName:"অসমীয়া"},av:{name:"Avaric",nativeName:"авар мацӀ, магӀарул мацӀ"},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azərbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:"башҡорт теле"},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:"Беларуская"},bn:{name:"Bengali",nativeName:"বাংলা"},bh:{name:"Bihari",nativeName:"भोजपुरी"},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:"български език"},my:{name:"Burmese",nativeName:"ဗမာစာ"},ca:{name:"Catalan; Valencian",nativeName:"Català"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:"нохчийн мотт"},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiCheŵa, chinyanja"},zh:{name:"Chinese",nativeName:"中文 (Zhōngwén), 汉语, 漢語"},cv:{name:"Chuvash",nativeName:"чӑваш чӗлхи"},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ"},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"česky, čeština"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:"ދިވެހި"},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"Eʋegbe"},fo:{name:"Faroese",nativeName:"føroyskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"français, langue française"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:"ქართული"},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek, Modern",nativeName:"Ελληνικά"},gn:{name:"Guaraní",nativeName:"Avañeẽ"},gu:{name:"Gujarati",nativeName:"ગુજરાતી"},ht:{name:"Haitian; Haitian Creole",nativeName:"Kreyòl ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, هَوُسَ"},he:{name:"Hebrew (modern)",nativeName:"עברית"},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:"हिन्दी, हिंदी"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"Asụsụ Igbo"},ik:{name:"Inupiaq",nativeName:"Iñupiaq, Iñupiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"Íslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ"},ja:{name:"Japanese",nativeName:"日本語 (にほんご／にっぽんご)"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:"ಕನ್ನಡ"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"कश्मीरी, كشميري‎"},kk:{name:"Kazakh",nativeName:"Қазақ тілі"},km:{name:"Khmer",nativeName:"ភាសាខ្មែរ"},ki:{name:"Kikuyu, Gikuyu",nativeName:"Gĩkũyũ"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kirghiz, Kyrgyz",nativeName:"кыргыз тили"},kv:{name:"Komi",nativeName:"коми кыв"},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:"한국어 (韓國語), 조선말 (朝鮮語)"},ku:{name:"Kurdish",nativeName:"Kurdî, كوردی‎"},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"Lëtzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingála"},lo:{name:"Lao",nativeName:"ພາສາລາວ"},lt:{name:"Lithuanian",nativeName:"lietuvių kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latviešu valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:"македонски јазик"},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu, بهاس ملايو‎"},ml:{name:"Malayalam",nativeName:"മലയാളം"},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"Māori",nativeName:"te reo Māori"},mr:{name:"Marathi (Marāṭhī)",nativeName:"मराठी"},mh:{name:"Marshallese",nativeName:"Kajin M̧ajeļ"},mn:{name:"Mongolian",nativeName:"монгол"},na:{name:"Nauru",nativeName:"Ekakairũ Naoero"},nv:{name:"Navajo, Navaho",nativeName:"Diné bizaad, Dinékʼehǰí"},nb:{name:"Norwegian Bokmål",nativeName:"Norsk bokmål"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"नेपाली"},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe, Ojibwa",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ"},cu:{name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:"ѩзыкъ словѣньскъ"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"ଓଡ଼ିଆ"},os:{name:"Ossetian, Ossetic",nativeName:"ирон æвзаг"},pa:{name:"Panjabi, Punjabi",nativeName:"ਪੰਜਾਬੀ, پنجابی‎"},pi:{name:"Pāli",nativeName:"पाऴि"},fa:{name:"Persian",nativeName:"فارسی"},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto, Pushto",nativeName:"پښتو"},pt:{name:"Portuguese",nativeName:"Português"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian, Moldavian, Moldovan",nativeName:"română"},ru:{name:"Russian",nativeName:"русский язык"},sa:{name:"Sanskrit (Saṁskṛta)",nativeName:"संस्कृतम्"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"सिन्धी, سنڌي، سندھی‎"},se:{name:"Northern Sami",nativeName:"Davvisámegiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"yângâ tî sängö"},sr:{name:"Serbian",nativeName:"српски језик"},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"Gàidhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhala, Sinhalese",nativeName:"සිංහල"},sk:{name:"Slovak",nativeName:"slovenčina"},sl:{name:"Slovene",nativeName:"slovenščina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish; Castilian",nativeName:"español, castellano"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:"தமிழ்"},te:{name:"Telugu",nativeName:"తెలుగు"},tg:{name:"Tajik",nativeName:"тоҷикӣ, toğikī, تاجیکی‎"},th:{name:"Thai",nativeName:"ไทย"},ti:{name:"Tigrinya",nativeName:"ትግርኛ"},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:"བོད་ཡིག"},tk:{name:"Turkmen",nativeName:"Türkmen, Түркмен"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog, ᜏᜒᜃᜅ᜔ ᜆᜄᜎᜓᜄ᜔"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Türkçe"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"татарча, tatarça, تاتارچا‎"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uighur, Uyghur",nativeName:"Uyƣurqə, ئۇيغۇرچە‎"},uk:{name:"Ukrainian",nativeName:"українська"},ur:{name:"Urdu",nativeName:"اردو"},uz:{name:"Uzbek",nativeName:"zbek, Ўзбек, أۇزبېك‎"},ve:{name:"Venda",nativeName:"Tshivenḓa"},vi:{name:"Vietnamese",nativeName:"Tiếng Việt"},vo:{name:"Volapük",nativeName:"Volapük"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"ייִדיש"},yo:{name:"Yoruba",nativeName:"Yorùbá"},za:{name:"Zhuang, Chuang",nativeName:"Saɯ cueŋƅ, Saw cuengh"},zh_tw:{name:"Chinese_tw",nativeName:"繁體中文"},zh_cn:{name:"Chinese_cn",nativeName:"简体中文"}},o=function(e){var t=a[e];return t?t.name:void 0},r=function(e){var t=a[e];return t?t.nativeName:void 0};this.getLanguageName=o,this.getLanguageNativeName=r}]),angular.module("binary").factory("localStorageService",["$state","appStateService",function(e,t){var n={},a=function(e,t,n){var a=-1;return e.forEach(function(o,r){e[r][t]===n&&(a=r)}),a};return n.removeToken=function(e){if(localStorage.hasOwnProperty("accounts")){var t=JSON.parse(localStorage.accounts),n=a(t,"token",e);n>-1&&(t.splice(n),localStorage.accounts=JSON.stringify(t))}},n.getDefaultToken=function(){if(localStorage.accounts&&JSON.parse(localStorage.accounts)instanceof Array){var e=JSON.parse(localStorage.accounts),t=a(e,"is_default",!0);if(t>-1)return e[t].token}return null},n.manageInvalidToken=function(){var a=n.getDefaultToken();a&&n.removeToken(a),localStorage.hasOwnProperty("accounts")?(accounts=JSON.parse(localStorage.accounts),accounts.length?(accounts[0].is_default=!0,localStorage.accounts=JSON.stringify(accounts),t.invalidTokenRemoved=!0,e.go("accounts")):e.go("signin")):e.go("signin")},n}]),angular.module("binary").service("marketService",["websocketService","proposalService","config",function(e,t,n){var a=function(e){var t={index:["R_100","R_25","R_50","R_75"],BEARBULL:["RDBEAR","RDBULL"],MOONSUN:["RDMOON","RDSUN"],MARSVENUS:["RDMARS","RDVENUS"],YANGYIN:["RDYANG","RDYIN"]},n=[],a=[];return Object.keys(t).forEach(function(o){var r=[],i=-1;e.forEach(function(e,n){e.symbol==t[o][0]&&(i=n)}),0>i||(t[o].forEach(function(n,i){var s=-1;e.forEach(function(e,n){e.symbol==t[o][i]&&(s=n)}),s>=0&&(r.push(e[s]),a.push(s))}),r.sort(),n=n.concat(r))}),e.forEach(function(e,t){a.indexOf(t)<0&&n.push(e)}),n},o=function(e){return e.sort(function(e,t){return e.display_name>t.display_name?1:e.display_name<t.display_name?-1:0}),e=a(e)};this.fixOrder=function(){if(sessionStorage.active_symbols&&"null"!==sessionStorage.active_symbols){var e=JSON.parse(sessionStorage.active_symbols);Object.keys(e).forEach(function(t){e[t]=o(e[t])}),sessionStorage.active_symbols=JSON.stringify(e)}},this.getActiveMarkets=function(){if(!sessionStorage.active_symbols||"null"===sessionStorage.active_symbols)return[];var e=JSON.parse(sessionStorage.active_symbols);return e?Object.keys(e):(console.log(e),[])},this.getAllSymbolsForAMarket=function(e){if(!e||!sessionStorage.active_symbols||!sessionStorage.asset_index)return[];var t=JSON.parse(sessionStorage.active_symbols)[e],a=JSON.parse(sessionStorage.asset_index),o=n.assetIndexes,r=[];return t.map(function(e){for(var t=0;t<a.length;t++)if(e.symbol===a[t][o.symbol]){for(var n=a[t][o.contracts],i=0;i<n.length;i++)if(-1!==n[i][o.contractFrom].indexOf("t")){e.display_name=a[t][o.displayName],r.push(e);break}break}a.splice(t,1)}),r},this.getSymbolDetails=function(t){e.sendRequestFor.contractsForSymbol(t)},this.getDefault={market:function(e){var n=t.get();return n&&n.passthrough&&n.passthrough.market&&e[n.passthrough.market]?n.passthrough.market:_.findKey(e,function(e){return e})},symbol:function(e,n){var a=t.get();return a&&a.passthrough&&a.passthrough.market&&a.symbol&&a.passthrough.market==e?a.symbol:n[0].symbol},tradeType:function(e){if(_.isEmpty(e))return null;var n=t.get(),a=n.contract_type,o=e[0].value;return e.forEach(function(e,t){return e.value==a?void(o=a):void 0}),o},tick:function(){var e=t.get();return e.duration?e.duration:5},digit:function(){var e=t.get();return e.barrier?e.barrier:0},basis:function(){var e=t.get();return e.basis?e.basis:"payout"},amount:function(){var e=t.get();return isNaN(e.amount)?5:e.amount}},this.getTradeTypes=function(e){var t=n.tradeTypes,a=[];return t.forEach(function(t,n){for(var o in e)if(e.hasOwnProperty(o)&&t.value===o){for(var r=!1,i=0;i<e[o].length;i++){var s=e[o][i].min_contract_duration;s&&s.toString().match(/^\d+t$/)&&(r=!0)}r&&a.push(t)}}),a},this.removeActiveSymbols=function(){sessionStorage.active_symbols=null},this.removeAssetIndex=function(){sessionStorage.asset_index=null},this.hasActiveSymobols=function(){return sessionStorage.active_symbols?JSON.parse(sessionStorage.active_symbols):!1},this.hasAssetIndex=function(){return sessionStorage.asset_index?JSON.parse(sessionStorage.asset_index):!1}}]),angular.module("binary").factory("tableStateService",function(){var e={};return e.dateType="allTime",e.dateFrom="",e.dateTo="",e.currentPage=0,e.appID="allApps",e.batchNum=0,e.batchLimit=0,e.batchSize=20,e.completedGroup=!0,e.statementDateType="allTime",e.statementDateFrom="",e.statementDateTo="",e.statementCurrentPage=0,e.statementAppID="allApps",e.statementBatchNum=0,e.statementBatchLimit=0,e.statementBatchSize=20,e.statementCompletedGroup=!0,e}),function(){function e(e){var t={};return t.spinnerLogo={start:function(){e.$broadcast("spinner-logo:start")},stop:function(){e.$broadcast("spinner-logo:stop")}},t}angular.module("binary.share.services").factory("utilsService",e),e.$inject=["$rootScope"]}(),angular.module("binary").factory("websocketService",["$rootScope","localStorageService","alertService","appStateService","$state","config",function(e,t,n,a,o,r){var i="",s=function p(e,t){3===i.readyState?(l(),t||setTimeout(function(){p(e)},1e3)):1===i.readyState?e():i instanceof WebSocket?setTimeout(function(){p(e)},1e3):(l(),t||setTimeout(function(){p(e)},1e3))},c=function(e){var n=t.getDefaultToken();s(function(){i.send(JSON.stringify(e))},e.hasOwnProperty("authorize")&&n)},l=function m(n){n=n||!1;var o=localStorage.language||"en";(!i||3===i.readyState||n)&&(i&&0!==i.readyState&&i.close(),i=null,a.isLoggedin=!1,i=new WebSocket(r.wsUrl+"?app_id="+r.app_id+"&l="+o),i.onopen=function(){var n=t.getDefaultToken();if(n){var a={authorize:n,passthrough:{type:"reopen-connection"}};c(a)}console.log("socket is opened"),e.$broadcast("connection:ready")},i.onmessage=function(e){d(e)},i.onclose=function(t){console.log("socket is closed ",t),m(),console.log("socket is reopened"),a.isLoggedin=!1,e.$broadcast("connection:reopened")},i.onerror=function(t){3==t.target.readyState&&e.$broadcast("connection:error"),a.isLoggedin=!1})};e.$on("language:updated",function(){l(!0)});var u={};u.authenticate=function(e,t){t=t,a.isLoggedin=!1;var n={authorize:e};for(key in t)t.hasOwnProperty(key)&&(n[key]=t[key]);c(n)},u.logout=function(){localStorage.removeItem("accounts"),u.sendRequestFor.forgetProposals(),sessionStorage.active_symbols=null,sessionStorage.asset_index=null,a.isRealityChecked=!1,a.isChangedAccount=!1,a.isPopupOpen=!1,a.isCheckedAccountType=!1,a.isLoggedin=!1,sessionStorage.removeItem("start"),sessionStorage.removeItem("_interval"),localStorage.removeItem("termsConditionsVersion"),a.profitTableRefresh=!0,a.statementRefresh=!0,a.isNewAccountReal=!1,a.isNewAccountMaltainvest=!1,a.hasMLT=!1,sessionStorage.removeItem("countryParams"),u.closeConnection(),o.go("signin")},u.sendRequestFor={websiteStatus:function(){var e={website_status:1};c(e)},symbols:function(){var e={active_symbols:"brief"};c(e)},assetIndex:function(){var e={asset_index:1};c(e)},currencies:function(){var e={payout_currencies:1};c(e)},contractsForSymbol:function(e){var t={contracts_for:e};c(t)},ticksForSymbol:function(e){var t={ticks:e};c(t)},forgetAll:function(e){var t={forget_all:e};c(t)},forgetStream:function(e){var t={forget:e};c(t)},forgetProposals:function(){var e={forget_all:"proposal"};c(e)},forgetTicks:function(){var e={forget_all:"ticks"};c(e)},proposal:function(e){c(e)},purchase:function(e,t){var n={buy:e,price:t||0};c(n)},balance:function(){var e={balance:1,subscribe:1};c(e)},portfolio:function(){var e={portfolio:1};c(e)},profitTable:function(e,t){var n={profit_table:1};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);c(n)},ticksHistory:function(e){e.ticks_history&&c(e)},openContract:function(e,t){var n={};n.proposal_open_contract=1,e&&(n.contract_id=e);for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);c(n)},sellExpiredContract:function(){var e={sell_expired:1};c(e)},landingCompanyDetails:function(e){var t={landing_company_details:e};c(t)},realityCheck:function(){var e={reality_check:1};c(e)},accountOpening:function(e){var t={verify_email:e,type:"account_opening"};c(t)},residenceListSend:function(){var e={residence_list:1};c(e)},newAccountVirtual:function(e,t,n){var a={new_account_virtual:"1",verification_code:e,client_password:t,residence:n};c(a)},accountSetting:function(){var e={get_settings:1};c(e)},setAccountSettings:function(e){e.set_settings=1,c(e)},landingCompanySend:function(e){var t={landing_company:e};c(t)},statesListSend:function(e){var t={states_list:e};c(t)},createRealAccountSend:function(e){var t={new_account_real:"1"};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);c(t)},createMaltainvestAccountSend:function(e){var t={new_account_maltainvest:"1"};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);c(t)},statement:function(e){var t={statement:1};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);c(t)},ping:function(){var e={ping:1};c(e)},setSelfExclusion:function(e){var t={set_self_exclusion:1};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);c(t)},getSelfExclusion:function(){var e={get_self_exclusion:1};c(e)},TAndCApprovalSend:function(){var e={tnc_approval:1};c(e)}},u.closeConnection=function(){i&&i.close()};var d=function(o){var r=JSON.parse(o.data);if(r){r.error&&"InvalidToken"===r.error.code&&t.manageInvalidToken();var i=r.msg_type;switch(i){case"authorize":if(r.authorize)r.authorize.token=r.echo_req.authorize,window._trackJs.userId=r.authorize.loginid,a.isLoggedin=!0,a.virtuality=r.authorize.is_virtual,localStorage.landingCompanyName=r.authorize.landing_company_fullname,a.scopes=r.authorize.scopes,amplitude.setUserId(r.authorize.loginid),_.isEmpty(r.authorize.currency)?u.sendRequestFor.currencies():sessionStorage.currency=r.authorize.currency,e.$broadcast("authorize",r.authorize,r.req_id,r.passthrough);else{var s="Unexpected Error!";r.hasOwnProperty("error")&&(t.removeToken(r.echo_req.authorize),s=r.error.message),e.$broadcast("authorize",!1,s),a.isLoggedin=!1}break;case"website_status":e.$broadcast("website_status",r.website_status),localStorage.termsConditionsVersion=r.website_status.terms_conditions_version;break;case"active_symbols":var c=r.active_symbols,l=_.groupBy(c,"market"),d={};for(var p in l)l.hasOwnProperty(p)&&1==l[p][0].exchange_is_open&&(d[p]=l[p]);sessionStorage.active_symbols=JSON.stringify(d),e.$broadcast("symbols:updated",d);break;case"asset_index":sessionStorage.asset_index=JSON.stringify(r.asset_index),e.$broadcast("assetIndex:updated");break;case"payout_currencies":e.$broadcast("currencies",r.payout_currencies);break;case"proposal":r.proposal?e.$broadcast("proposal",r.proposal,r.req_id):r.error&&e.$broadcast("proposal:error",r.error,r.req_id);break;case"contracts_for":var m=(r.echo_req.contracts_for,_.groupBy(r.contracts_for.available,"contract_category"));e.$broadcast("symbol",m);break;case"buy":r.error?(e.$broadcast("purchase:error",r.error),n.displayError(r.error.message)):e.$broadcast("purchase",r);break;case"balance":r.error||e.$broadcast("balance",r.balance);break;case"tick":e.$broadcast("tick",r);break;case"history":e.$broadcast("history",r);break;case"candles":e.$broadcast("candles",r);break;case"ohlc":e.$broadcast("ohlc",r);break;case"portfolio":e.$broadcast("portfolio",r.portfolio);break;case"profit_table":r.profit_table?e.$broadcast("profit_table:update",r.profit_table,r.req_id):r.error&&e.$broadcast("profit_table:error",r.error.message);break;case"sell_expired":e.$broadcast("sell:expired",r.sell_expired);break;case"proposal_open_contract":e.$broadcast("proposal:open-contract",r.proposal_open_contract,r.req_id);break;case"landing_company_details":e.$broadcast("landing_company_details",r.landing_company_details);break;case"reality_check":e.$broadcast("reality_check",r.reality_check);break;case"verify_email":r.verify_email?e.$broadcast("verify_email",r.verify_email):r.error&&e.$broadcast("verify_email:error",r.error.details);break;case"residence_list":e.$broadcast("residence_list",r.residence_list);break;case"new_account_virtual":r.new_account_virtual?e.$broadcast("new_account_virtual",r.new_account_virtual):r.error&&e.$broadcast("new_account_virtual:error",r.error);break;case"get_settings":r.get_settings?e.$broadcast("get_settings",r.get_settings):r.error&&e.$broadcast("get_settings:error",r.error.message);break;case"landing_company":e.$broadcast("landing_company",r.landing_company);break;case"states_list":e.$broadcast("states_list",r.states_list);break;case"new_account_real":r.new_account_real?e.$broadcast("new_account_real",r.new_account_real):r.error&&e.$broadcast("new_account_real:error",r.error);break;case"new_account_maltainvest":r.new_account_maltainvest?e.$broadcast("new_account_maltainvest",r.new_account_maltainvest):r.error&&e.$broadcast("new_account_maltainvest:error",r.error);break;case"statement":r.statement?e.$broadcast("statement:update",r.statement,r.req_id):r.error&&e.$broadcast("statement:error",r.error.message);break;case"get_self_exclusion":r.get_self_exclusion?e.$broadcast("get-self-exclusion",r.get_self_exclusion):r.error&&e.$broadcast("get-self-exclusion:error",r.error.message);break;case"set_self_exclusion":r.set_self_exclusion?e.$broadcast("set-self-exclusion",r.set_self_exclusion):r.error&&e.$broadcast("set-self-exclusion:error",r.error.message);break;case"set_settings":r.set_settings?e.$broadcast("set-settings",r.set_settings):r.error&&e.$broadcast("set-settings:error",r.error.message);break;case"tnc_approval":r.tnc_approval?e.$broadcast("tnc_approval",r.tnc_approval):r.error&&e.$broadcast("tnc_approval:error",r.error)}}};return u}]),function(){function e(e,t,n,a,o,r,i){var s=this,c=function(){s.accounts=a.getAll(),s.selectedAccount=a.getDefault().token},l=function u(){o.isLoggedin?(i.sendRequestFor.symbols(),i.sendRequestFor.assetIndex()):setTimeout(u,500)};c(),s.updateAccount=function(e){a.setDefault(e),a.validate(),l(),o.isChangedAccount=!0,o.isCheckedAccountType=!1,sessionStorage.removeItem("start"),sessionStorage.removeItem("_interval"),o.isProfitTableSet=!1,o.isStatementSet=!1,o.profitTableRefresh=!0,o.statementRefresh=!0,o.isNewAccountReal=!1,o.isNewAccountMaltainvest=!1,o.hasMLT=!1,sessionStorage.removeItem("countryParams"),o.isPopupOpen=!1,n.toggleLeft()},e.$on("authorize",function(e,n){n&&o.newAccountAdded&&(a.add(n),a.setDefault(a.addedAccount),o.newAccountAdded=!1,s.accounts=a.getAll(),s.selectedAccount=a.getDefault().token,s.updateAccount(s.selectedAccount),t.go("trade"),a.addedAccount="")})}angular.module("binary.share.components.accounts.controllers").controller("AccountsController",e),e.$inject=["$scope","$state","$ionicSideMenuDelegate","accountService","appStateService","utilsService","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/accounts/accounts.template.html",controller:"AccountsController",controllerAs:"vm",bindToContoller:!0,scope:{}};return e}angular.module("binary.share.components.accounts.directives").directive("bgAccounts",e)}(),function(){function e(e,t,n){var a=this;t.ready(function(){e.$applyAsync(function(){window.cordova?cordova.getAppVersion(function(e){a.appVersion=e},function(e){console.log(e)}):n.getAppVersion().success(function(e){a.appVersion=e.version}).error(function(e){a.appVersion="0.0.0"})})})}angular.module("binary.share.components.app-version.controllers").controller("AppVersionController",e),e.$inject=["$scope","$ionicPlatform","appVersionService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/app-version/app-version.template.html",controller:"AppVersionController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.app-version.directives").directive("bgAppVersion",e)}(),function(){function e(e,t){function n(){t.sendRequestFor.balance()}function a(){e.$broadcast("currency:changed",o.balance.currency)}var o=this;o.balance=null,e.$on("authorize",function(t,n,r,i){e.$applyAsync(function(){o.balance={currency:n.currency,balance:n.balance,loginid:n.loginid},a()})}),e.$on("balance",function(t,n){e.$applyAsync(function(){o.balance=n,a()})}),e.$on("language:updated",function(e){t.sendRequestFor.forgetAll("balance"),o.balance=null,n()}),n()}angular.module("binary.share.components.balance.controllers").controller("BalanceController",e),e.$inject=["$scope","websocketService"]}(),function(){function e(e){function t(t,n,a,o){t.$on("$destroy",function(){e.sendRequestFor.forgetStream(o.balance.id)})}var n={restrict:"E",templateUrl:"js/share/components/balance/balance.template.html",controller:"BalanceController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=?"},link:t};return n}angular.module("binary.share.components.balance.directives").directive("bgBalance",e),e.$inject=["websocketService"]}(),function(){function e(e){var t=this;t.showMessage=!1,e.$on("connection:ready",function(n){e.$applyAsync(function(){t.showMessage=!1})}),e.$on("connection:error",function(n){e.$applyAsync(function(){t.showMessage=!0})})}angular.module("binary.share.components.connectivity.controllers").controller("ConnectionLostController",e),e.$inject=["$scope"]}(),function(){function e(e,t,n){function a(){ionic.Platform.isWebView()?(e.$on("$cordovaNetwork:online",function(e,n){t.go("home")}),e.$on("$cordovaNetwork:offline",function(e,n){t.go("no-connection")})):(window.addEventListener("online",function(e){t.go("home")},!1),window.addEventListener("offline",function(e){t.go("no-connection")},!1))}function o(){a()}var r=this;r.isOffline=function(){return ionic.Platform.isWebView()?!n.isOnline():void!navigator.onLine},r.isOnline=function(){return ionic.Platform.isWebView()?n.isOnline():navigator.onLine},e.$on("$stateChangeSuccess",function(e,n){r.isOnline()||t.go("no-connection")}),o()}angular.module("binary.share.components.connectivity.controllers").controller("ConnectivityController",e),e.$inject=["$scope","$state","$cordovaNetwork"]}(),function(){function e(){var e={restrict:"E",controller:"ConnectivityController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.connectivity.directives").directive("bgConnectivity",e)}(),function(){function e(e,t,n,a,o){var r=this;r.hideMenuButton=!1,r.disableMenuButton=!1,r.showBack=!1,a.canDragContent(!1),n.backView(null),r.ios=ionic.Platform.isIOS(),r.android=ionic.Platform.isAndroid(),r.toggleSideMenu=function(){(o.tradeMode||!o.purchaseMode)&&a.toggleLeft()},e.$watch(function(){return o.purchaseMode},function(){r.disableMenuButton=o.purchaseMode}),e.$on("$stateChangeSuccess",function(e,t,n,a,i){r.to=t,r.from=a,["transactiondetail","language","profile","self-exclusion"].indexOf(r.to.name)>-1?(r.hideMenuButton=!0,r.showBack=!0):["acceptTermsAndConditions"].indexOf(r.to.name)>-1?(r.hideMenuButton=!0,r.showBack=!1):(r.hideMenuButton=!1,r.showBack=!1,"profittable"==r.from.name&&(o.isProfitTableSet=!1),"statement"==r.from.name&&(o.isStatementSet=!1))}),r.goToPrevPage=function(){t.go(r.from)}}angular.module("binary.share.components").controller("HeaderController",e),e.$inject=["$scope","$state","$ionicHistory","$ionicSideMenuDelegate","appStateService"]}(),function(){function e(){function e(){}var t={link:e,templateUrl:"js/share/components/header/header.template.html",retrict:"A",controller:"HeaderController",controllerAs:"vm",bindToController:!0,scope:{spinLogo:"="}};return t}angular.module("binary.share.components").directive("bgHeader",e)}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/language/language-list.template.html",controller:"LanguageController",controllerAs:"vm",scope:{}};return e}angular.module("binary.share.components.language.directives").directive("bgLanguageList",e)}(),function(){function e(e,t,n,a,o){var r=this;r.languages=[],r.appSupportedLanguages=[],r.languagesList=[],r.isLanguageReady=!1,r.ios=ionic.Platform.isIOS(),r.android=ionic.Platform.isAndroid(),a.sendRequestFor.websiteStatus(),e.$on("website_status",function(a,i){r.isLanguageReady||(r.languages=[],r.languagesList=i.supported_languages,r.appSupportedLanguages=t.appSupportedLanguages,_.forEach(r.appSupportedLanguages,function(e){if(r.value=e.toUpperCase(),r.languagesList.indexOf(r.value)>-1){var t=r.value.toLowerCase(),a=n.getLanguageNativeName(t);r.languages.push({id:t,title:a})}}),r.isLanguageReady=!0,o.isLanguageReady=!0,e.$apply())}),r.language=n.read(),r.changeLanguage=function(e){r.language=e||r.language,n.update(r.language)}}angular.module("binary.share.components.language.controllers").controller("LanguageController",e),e.$inject=["$scope","config","languageService","websocketService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/language/language.template.html",controller:"LanguageController",controllerAs:"vm",scope:{},bindToController:!0};return e}angular.module("binary.share.components.language.directives").directive("language",e);
}(),function(){function e(e,t,n,a,o,r,i){var s=this;s.logout=function(e){r.confirmRemoveAllAccount(function(e){"boolean"!=typeof e&&(e=1==e?!0:!1),e&&o.logout()})}}angular.module("binary.share.components.logout.controllers").controller("LogoutController",e),e.$inject=["$rootScope","$state","accountService","appStateService","websocketService","alertService","proposalService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/logout/logout.template.html",controller:"LogoutController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.logout.directives").directive("bgLogout",e)}(),function(){function e(e,t){function n(n,a,o){var r=0,i=o.interval?Number(o.interval):300;n.longPress=!1;var s=function(a){a.stopPropagation(),a.preventDefault(),n.longPress=!0,o.repetitive&&"true"===o.repetitive?(n.$eval(o.onLongPress),r=t(function(){n.longPress&&n.$eval(o.onLongPress)},i)):r=e(function(){n.longPress&&n.$eval(o.onLongPress)},i)},c=function(a){n.longPress=!1,o.repetitive&&"true"===o.repetitive?t.cancel(r):e.cancel(r),r=void 0,o.onTouchEnd&&n.$apply(function(){n.$eval(o.onTouchEnd)})};a.bind("touchstart",s),a.bind("touchend",c),a.bind("mousedown",s),a.bind("mouseup",c)}var a={restrict:"A",link:n};return a}angular.module("binary.share.components.long-press.directives").directive("onLongPress",e),e.$inject=["$timeout","$interval"]}(),function(){function e(){function e(e,t,n,a){a&&(a.$formatters.push(function(e){return e?Number(e):e}),a.$parsers.push(function(e){return e?Number(e):e}))}var t={restrict:"A",require:"?ngModel",link:e};return t}angular.module("binary.share.components.number.directives").directive("bgNumber",e)}(),function(){function e(e,t,n){function a(){o()}function o(){t.isLoggedin&&n.sendRequestFor.ping(),e(o,6e4)}a()}angular.module("binary.share.components.ping.controllers").controller("PingController",e),e.$inject=["$timeout","appStateService","websocketService"]}(),function(){function e(){var e={restrict:"E",controller:"PingController",controllerAs:"vm",scope:{}};return e}angular.module("binary.share.components.ping.directives").directive("ping",e)}(),function(){function e(e,t,n,a,o){var r=this;r.data={},r.countryParams={},r.showUpgradeLink=!1,r.showUpgradeLinkMaltainvest=!1,r.isCheckedCompany=!1,a.hasMLT=!1,r.isVirtual=!1,r.hasGamingAndVirtual=!1,r.hasGamingNotVirtual=!1,r.hasFinancialAndMaltainvest=!1,r.idsFound=[],r.reset=function(){r.data={},r.countryParams={},r.showUpgradeLink=!1,r.showUpgradeLinkMaltainvest=!1,r.isCheckedCompany=!1,a.hasMLT=!1,r.hasGamingAndVirtual=!1,r.hasGamingNotVirtual=!1,r.hasFinancialAndMaltainvest=!1,r.idsFound=[],a.isNewAccountReal=!1,a.isNewAccountMaltainvest=!1,a.isCheckedAccountType=!1,r.hasGamingAndMaltainvest=!1,r.notMaltainvest=!1,r.hasGamingAndFinancialAndMaltainvest=!1},r.getCompany=function(){a.isCheckedAccountType=!0,n.sendRequestFor.accountSetting()},a.isLoggedin&&!a.isCheckedAccountType&&(r.reset(),1==a.virtuality?r.isVirtual=!0:r.isVirtual=!1,r.getCompany()),e.$on("authorize",function(e,t){a.isCheckedAccountType||(r.reset(),1==t.is_virtual?r.isVirtual=!0:r.isVirtual=!1,r.getCompany())}),e.$on("get_settings",function(e,t){r.data.setting=t,r.data.countryCode=r.data.setting.country_code,r.data.countryOfAccount=r.data.setting.country,r.countryParams.countryCode=r.data.countryCode,r.countryParams.countryOfAccount=r.data.countryOfAccount,sessionStorage.countryParams=JSON.stringify(r.countryParams),"jp"!=r.data.countryCode&&n.sendRequestFor.landingCompanySend(r.data.countryCode)}),e.$on("landing_company",function(e,t){r.isCheckedCompany||(r.isCheckedCompany=!0,r.accountStates(t))}),r.accountStates=function(e){r.data.landingCompany=e,r.data.landingCompany.hasOwnProperty("gaming_company")?r.isVirtual?(r.hasGamingAndVirtual=!0,r.getToken()):r.data.landingCompany.hasOwnProperty("financial_company")&&"maltainvest"==r.data.landingCompany.financial_company.shortcode&&(r.hasGamingNotVirtual=!0,r.getToken()):r.data.landingCompany.hasOwnProperty("gaming_company")||r.isVirtual&&r.data.landingCompany.hasOwnProperty("financial_company")&&"maltainvest"==r.data.landingCompany.financial_company.shortcode&&(r.hasFinancialAndMaltainvest=!0,r.getToken())},r.getToken=function(){localStorage.hasOwnProperty("accounts")&&(r.accounts=JSON.parse(localStorage.accounts),r.findTokens())},r.findTokens=function(){1==r.hasGamingAndVirtual?(r.idsFound=[],r.count=r.accounts.length,r.accounts.forEach(function(e,t){r.val=r.accounts[t].id,r.val.search("VRTC")>-1?r.idsFound.push("VRTC"):r.val.search("MX")>-1?r.idsFound.push("MXorCRorMLT"):r.val.search("CR")>-1?r.idsFound.push("MXorCRorMLT"):r.val.search("MLT")>-1&&r.idsFound.push("MXorCRorMLT"),--r.count||r.gamingAndVirtualStages()})):1==r.hasGamingNotVirtual?(r.idsFound=[],r.count=r.accounts.length,r.accounts.forEach(function(e,t){r.val=r.accounts[t].id,r.val.search("MF")>-1&&r.idsFound.push("MF"),--r.count||r.gamingAndFinancialAndMaltainvestStages()})):1==r.hasFinancialAndMaltainvest&&(r.idsFound=[],r.count=r.accounts.length,r.accounts.forEach(function(e,t){r.val=r.accounts[t].id,r.val.search("MF")>-1&&r.idsFound.push("MF"),--r.count||r.financialAndMaltainvestStages()}))},r.gamingAndVirtualStages=function(){r.idsFound.indexOf("VRTC")>-1&&-1==r.idsFound.indexOf("MXorCRorMLT")&&r.newAccountReal()},r.gamingAndFinancialAndMaltainvestStages=function(){-1==r.idsFound.indexOf("MF")&&(a.hasMLT=!0,r.newAccountMaltainvest())},r.financialAndMaltainvestStages=function(){-1==r.idsFound.indexOf("MF")&&r.newAccountMaltainvest()},r.newAccountReal=function(){e.$applyAsync(function(){a.isCheckedAccountType&&(r.showUpgradeLink=!0,a.isNewAccountReal=!0)})},r.newAccountMaltainvest=function(){e.$applyAsync(function(){a.isCheckedAccountType&&(r.showUpgradeLinkMaltainvest=!0,a.isNewAccountMaltainvest=!0)})},e.$on("logout",function(t){e.$applyAsync(function(){r.reset()})}),r.navigateToUpgrade=function(){t.go("realaccountopening")}}angular.module("binary.share.components.real-account-opening.controllers").controller("RealAccountOpeningController",e),e.$inject=["$scope","$state","websocketService","appStateService","accountService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/real-account-opening/real-account-opening.template.html",controller:"RealAccountOpeningController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.real-account-opening.directives").directive("bgRealAccountOpening",e)}(),function(){function e(e,t,n,a,o,r,i,s,c,l,u,d){var p,m=this;e.$on("authorize",function(e,n){m.sessionLoginId=n.loginid,s.isRealityChecked||0!=n.is_virtual||s.isChangedAccount?s.isRealityChecked&&s.isChangedAccount&&1==n.is_virtual?(t.cancel(m.realityCheckTimeout),s.isChangedAccount=!1,s.isRealityChecked=!0,_.isEmpty(sessionStorage.realityCheckStart)||sessionStorage.removeItem("realityCheckStart"),_.isEmpty(sessionStorage.start)||sessionStorage.removeItem("start")):s.isRealityChecked&&s.isChangedAccount&&0==n.is_virtual?(m.realityCheckTimeout&&t.cancel(m.realityCheckTimeout),_.isEmpty(sessionStorage.realityCheckStart)||sessionStorage.removeItem("realityCheckStart"),_.isEmpty(sessionStorage.start)||sessionStorage.removeItem("start"),s.isRealityChecked=!1,p=n.landing_company_name,i.sendRequestFor.landingCompanyDetails(p),s.isChangedAccount=!1):!s.isRealityChecked&&s.isChangedAccount&&0==n.is_virtual&&(m.realityCheckTimeout&&t.cancel(m.realityCheckTimeout),_.isEmpty(sessionStorage.realityCheckStart)||sessionStorage.removeItem("realityCheckStart"),_.isEmpty(sessionStorage.start)||sessionStorage.removeItem("start"),s.isRealityChecked=!1,p=n.landing_company_name,i.sendRequestFor.landingCompanyDetails(p),s.isChangedAccount=!1):(_.isEmpty(sessionStorage.realityCheckStart)||sessionStorage.removeItem("realityCheckStart"),_.isEmpty(sessionStorage.start)||sessionStorage.removeItem("start"),p=n.landing_company_name,i.sendRequestFor.landingCompanyDetails(p))}),e.$on("landing_company_details",function(e,t){1===t.has_reality_check&&m.hasRealityCheck()}),m.setInterval=function(e){sessionStorage.setItem("_interval",e)},m.setStart=function(e){sessionStorage.setItem("start",e)},m.getInterval=function(e){return sessionStorage.getItem(e)},m.getStart=function(e){return sessionStorage.getItem(e)},m.removeInterval=function(e){sessionStorage.removeItem(e)},m.removeStart=function(e){sessionStorage.removeItem(e)},m.hasRealityCheck=function(){if(s.isRealityChecked||1!=_.isEmpty(sessionStorage._interval))if(s.isRealityChecked||_.isEmpty(sessionStorage.start)){if(0==_.isEmpty(sessionStorage._interval)){var e=6e4*m.getInterval("_interval");m.realityCheckTimeout=t(m.getRealityCheck,e)}}else{s.isRealityChecked=!0;var n=m.getStart("start"),a=(new Date).getTime();if(6e4*m.getInterval("_interval")-(a-n)>0){var e=6e4*m.getInterval("_interval")-(a-n);m.realityCheckTimeout=t(m.getRealityCheck,e)}}else m.realityCheck()},m.realityCheck=function(){s.isRealityChecked=!0,m.data={},m.data.interval=60,s.isPopupOpen||(s.isPopupOpen=!0,n(["realitycheck.continue","realitycheck.title"]).then(function(t){l.displayRealitCheckInterval(t["realitycheck.title"],"realitycheck getinterval",e,"js/share/components/reality-check/interval-popup.template.html",[{text:t["realitycheck.continue"],type:"button-positive",onTap:function(e){m.data.interval<=120&&m.data.interval>=10?(m.setInterval(m.data.interval),m.data.start_interval=(new Date).getTime(),m.setStart(m.data.start_interval),m.hasRealityCheck(),s.isPopupOpen=!1,sessionStorage.setItem("realityCheckStart",Date.now())):e.preventDefault()}}])}))},m.getLastInterval=function(){m.removeInterval("_interval"),m.setInterval(m.data.interval)},e.$on("reality_check",function(e,t){m.alertRealityCheck(t)}),m.getRealityCheck=function(){i.sendRequestFor.realityCheck()},m.sessionTime=function(e){m.realityCheckitems.start_time=sessionStorage.getItem("realityCheckStart"),m.now=Date.now(),m.duration=m.now-m.realityCheckitems.start_time,m.realityCheckitems.days=Math.floor(m.duration/864e5),m.hour=m.duration-864e5*m.realityCheckitems.days,m.realityCheckitems.hours=Math.floor(m.hour/36e5),m.min=m.duration-(864e5*m.realityCheckitems.days+36e5*m.realityCheckitems.hours),m.realityCheckitems.minutes=Math.floor(m.min/6e4)},m.logout=function(){l.confirmRemoveAllAccount(function(e){"boolean"!=typeof e&&(e=1==e?!0:!1),e&&i.logout(),e||m.hasRealityCheck()})},m.alertRealityCheck=function(a){m.removeStart("start"),m.realityCheckitems=a,m.sessionLoginId!=m.realityCheckitems.loginid||s.isPopupOpen||(m.sessionTime(a),m.data={},m.data.interval=parseInt(m.getInterval("_interval")),t.cancel(m.realityCheckTimeout),s.isPopupOpen=!0,n(["realitycheck.title","realitycheck.continue","realitycheck.logout"]).then(function(t){l.displayRealityCheckResult(t["realitycheck.title"],"realitycheck result-popup",e,"js/share/components/reality-check/reality-check-result.template.html",[{text:t["realitycheck.logout"],type:"button-secondary",onTap:function(){m.logout()}},{text:t["realitycheck.continue"],type:"button-positive",onTap:function(e){m.data.interval<=120&&m.data.interval>=10?m.sessionLoginId==m.realityCheckitems.loginid&&(m.getLastInterval(m.data.interval),m.data.start_interval=(new Date).getTime(),m.setStart(m.data.start_interval),m.hasRealityCheck(),s.isPopupOpen=!1):e.preventDefault()}}])}))}}angular.module("binary.share.components.reality-check.controllers").controller("RealityCheckController",e),e.$inject=["$scope","$timeout","$translate","$location","$state","$ionicPopup","websocketService","appStateService","accountService","alertService","languageService","proposalService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/reality-check/reality-check.template.html",controller:"RealityCheckController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.reality-check.directives").directive("bgRealityCheck",e)}(),function(){function e(){function e(e,t,n,a){e.$watch(function(){return a.$viewValue},function(t,n){if(!_.isEmpty(e.regex)&&!_.isEmpty(a.$viewValue)){var o=RegExp(e.regex);o.test(a.$viewValue)?(a.$setViewValue(o.exec(a.$viewValue)[0]),a.$render()):(a.$setViewValue(n),a.$render())}})}var t={restrict:"A",link:e,require:"ngModel",scope:{regex:"@bgRegexValidate"}};return t}angular.module("binary.share.components.regex-validate.directives").directive("bgRegexValidate",e)}(),function(){function e(){function e(){}var t={link:e,templateUrl:"js/share/components/side-menu/side-menu.template.html",retrict:"A",scope:{}};return t}angular.module("binary.share.components").directive("bgSideMenu",e)}(),function(){function e(e){var t=this;t.start=!1,e.$on("spinner-logo:start",function(){t.start=!0}),e.$on("spinner-logo:stop",function(){t.start=!1})}angular.module("binary.share.components.spinner-logo.controllers").controller("SpinnerLogoController",e),e.$inject=["$scope"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/spinner-logo/spinner-logo.template.html",replace:!0,controller:"SpinnerLogoController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.spinner-logo.directives").directive("bgSpinnerLogo",e)}(),function(){function e(e){e.ready(function(){window.codePush&&window.codePush.sync()})}angular.module("binary.share.components.updater.controllers").controller("UpdaterController",e),e.$inject=["$ionicPlatform"]}(),function(){function e(){var e={restrict:"E",controller:"UpdaterController",controllerAs:"vm",scope:{}};return e}angular.module("binary.share.components.updater.directives").directive("bgUpdater",e)}(),function(){function e(e,t,n,a,o,r,i){var s=this;s.data={},s.salutationError=!1,s.firstNameError=!1,s.lastNameError=!1,s.dateOfBirthError=!1,s.countryError=!1,s.addressLine1Error=!1,s.addressLine2Error=!1,s.addressCityError=!1,s.addressStateError=!1,s.addressPostcodeError=!1,s.phoneError=!1,s.secretQuestionError=!1,s.secretAnswerError=!1,s.isReadonly=!1,s.data.salutation="Mr",s.data.forexTradingExperience="0-1 year",s.data.forexTradingFrequency="0-5 transactions in the past 12 months",s.data.indicesTradingExperience="0-1 year",s.data.indicesTradingFrequency="0-5 transactions in the past 12 months",s.data.commoditiesTradingExperience="0-1 year",s.data.commoditiesTradingFrequency="0-5 transactions in the past 12 months",s.data.stocksTradingExperience="0-1 year",s.data.stocksTradingFrequency="0-5 transactions in the past 12 months",s.data.otherDerivativesTradingExperience="0-1 year",s.data.otherDerivativesTradingFrequency="0-5 transactions in the past 12 months",s.data.otherInstrumentsTradingExperience="0-1 year",s.data.otherInstrumentsTradingFrequency="0-5 transactions in the past 12 months",s.data.employmentIndustry="Construction",s.data.educationLevel="Primary",s.data.incomeSource="Salaried Employee",s.data.netIncome="Less than $25,000",s.data.estimatedWorth="Less than $100,000",s.data.secretQuestion="Mother's maiden name",a.sendRequestFor.residenceListSend(),e.$on("residence_list",function(e,t){s.residenceList=t}),e.$applyAsync(function(){o.hasMLT&&(s.isReadonly=!0)}),s.validateName=function(e){var t=/[`~!@#$%^&*)(_=+\[}{\]\\\/";:\?><,|\d]+/;return{test:function(e){if(s.isReadonly)return!0;var n=t.test(e);return 1==n?!1:!0}}}(),s.countryParams=JSON.parse(sessionStorage.countryParams),s.data.countryCode=s.countryParams.countryCode,e.$applyAsync(function(){s.data.country=s.countryParams.countryOfAccount}),s.findPhoneCode=function(e){return e.value==s.data.countryCode},a.sendRequestFor.statesListSend(s.data.countryCode),e.$on("states_list",function(e,t){s.data.statesList=t,s.data.state=s.data.statesList[0].value}),a.sendRequestFor.accountSetting(),e.$on("get_settings",function(t,n){e.$applyAsync(function(){if(o.hasMLT){var e=new Date(n.date_of_birth);s.data.dateOfBirth=e.toISOString().slice(0,10),s.data.firstName=n.first_name,s.data.lastName=n.last_name,s.data.salutation=n.salutation}n.hasOwnProperty("address_line_1")&&(s.data.addressLine1=n.address_line_1),n.hasOwnProperty("address_line_2")&&(s.data.addressLine2=n.address_line_2),n.hasOwnProperty("address_postcode")&&(s.data.addressPostCode=n.address_postcode),n.hasOwnProperty("address_state")&&(s.data.state=n.address_state),n.hasOwnProperty("phone")&&(s.data.phone=n.phone),n.hasOwnProperty("phone")||(s.phoneCodeObj=s.residenceList.find(s.findPhoneCode),s.data.phone="+"+s.phoneCodeObj.phone_idd),n.hasOwnProperty("address_city")&&(s.data.addressCity=n.address_city)})}),s.submitAccountOpening=function(){s.salutationError=!1,s.firstNameError=!1,s.lastNameError=!1,s.dateOfBirthError=!1,s.countryError=!1,s.addressLine1Error=!1,s.addressLine2Error=!1,s.addressCityError=!1,s.addressStateError=!1,s.addressPostcodeError=!1,s.phoneError=!1,s.secretQuestionError=!1,s.secretAnswerError=!1,1==s.data.accept?s.data.acceptRisk=1:s.data.acceptRisk=0,_.isEmpty(s.data.state)&&(s.data.state=""),_.isEmpty(s.data.addressLine2)&&(s.data.addressLine2=""),_.isEmpty(s.data.addressPostcode)&&(s.data.addressPostcode=""),o.hasMLT||(s.data.birthDate=s.data.userDateOfBirth.toISOString().slice(0,10)),o.hasMLT&&(s.data.birthDate=s.data.dateOfBirth);var e={salutation:s.data.salutation,first_name:s.data.firstName,last_name:s.data.lastName,date_of_birth:s.data.birthDate,residence:s.countryParams.countryCode,address_line_1:s.data.addressLine1,address_line_2:s.data.addressLine2,address_city:s.data.addressCity,address_state:s.data.state,address_postcode:s.data.addressPostcode,phone:s.data.phone,secret_question:s.data.secretQuestion,secret_answer:s.data.secretAnswer,forex_trading_experience:s.data.forexTradingExperience,forex_trading_frequency:s.data.forexTradingFrequency,indices_trading_experience:s.data.indicesTradingExperience,indices_trading_frequency:s.data.indicesTradingFrequency,commodities_trading_experience:s.data.commoditiesTradingExperience,commodities_trading_frequency:s.data.commoditiesTradingFrequency,stocks_trading_experience:s.data.stocksTradingExperience,stocks_trading_frequency:s.data.stocksTradingFrequency,other_derivatives_trading_experience:s.data.otherDerivativesTradingExperience,other_derivatives_trading_frequency:s.data.otherDerivativesTradingFrequency,other_instruments_trading_experience:s.data.otherInstrumentsTradingExperience,other_instruments_trading_frequency:s.data.otherInstrumentsTradingFrequency,employment_industry:s.data.employmentIndustry,education_level:s.data.educationLevel,income_source:s.data.incomeSource,net_income:s.data.netIncome,estimated_worth:s.data.estimatedWorth,accept_risk:s.data.acceptRisk};a.sendRequestFor.createMaltainvestAccountSend(e)},e.$on("new_account_maltainvest:error",function(t,n){n.hasOwnProperty("details")&&e.$applyAsync(function(){n.details.hasOwnProperty("salutation")&&(s.salutationError=!0,s.salutationErrorMessage=n.details.salutation),n.details.hasOwnProperty("first_name")&&(s.firstNameError=!0,s.firstNameErrorMessage=n.details.first_name),n.details.hasOwnProperty("last_name")&&(s.lastNameError=!0,s.lastNameErrorMessage=n.details.last_name),n.details.hasOwnProperty("date_of_birth")&&(s.dateOfBirthError=!0,s.dateOfBirthErrorMessage=n.details.date_of_birth),n.details.hasOwnProperty("residence")&&(s.countryError=!0,s.countryErrorMessage=n.details.residence),n.details.hasOwnProperty("address_line_1")&&(s.addressLine1Error=!0,s.addressLine1ErrorMessage=n.details.address_line_1),n.details.hasOwnProperty("address_line_2")&&(s.addressLine2Error=!0,s.addressLine2ErrorMessage=n.details.address_line_2),n.details.hasOwnProperty("address_city")&&(s.addressCityError=!0,s.addressCityErrorMessage=n.details.address_city),n.details.hasOwnProperty("address_state")&&(s.addressStateError=!0,s.addressStateErrorMessage=n.details.address_state),n.details.hasOwnProperty("address_postcode")&&(s.addressPostcodeError=!0,s.addressPostcodeErrorMessage=n.details.address_postcode),n.details.hasOwnProperty("phone")&&(s.phoneError=!0,s.phoneErrorMessage=n.details.phone),n.details.hasOwnProperty("secret_question")&&(s.secretQuestionError=!0,s.secretQuestionErrorMessage=n.details.secret_question),n.details.hasOwnProperty("secret_answer")&&(s.secretAnswerError=!0,s.secretAnswerErrorMessage=n.details.secret_answer)}),n.code&&i.displayError(n.message)}),e.$on("new_account_maltainvest",function(e,t){a.authenticate(t.oauth_token),s.selectedAccount=t.oauth_token,o.newAccountAdded=!0,r.addedAccount=s.selectedAccount})}angular.module("binary.pages.new-real-account-opening.components.new-account-maltainvest").controller("NewAccountMaltainvestController",e),e.$inject=["$scope","$state","$rootScope","websocketService","appStateService","accountService","alertService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/new-real-account-opening/components/new-account-maltainvest/new-account-maltainvest.template.html",controller:"NewAccountMaltainvestController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.new-real-account-opening.components.new-account-maltainvest").directive("bgNewAccountMaltainvest",e)}(),function(){function e(e,t,n,a,o,r,i){var s=this;s.data={},s.salutationError=!1,s.firstNameError=!1,s.lastNameError=!1,s.dateOfBirthError=!1,s.countryError=!1,s.addressLine1Error=!1,s.addressLine2Error=!1,s.addressCityError=!1,s.addressStateError=!1,s.addressPostcodeError=!1,s.phoneError=!1,s.secretQuestionError=!1,s.secretAnswerError=!1,s.data.salutation="Mr",s.data.secretQuestion="Mother's maiden name",s.countryParams=JSON.parse(sessionStorage.countryParams),s.data.countryCode=s.countryParams.countryCode,e.$applyAsync(function(){s.data.country=s.countryParams.countryOfAccount}),a.sendRequestFor.statesListSend(s.data.countryCode),e.$on("states_list",function(e,t){s.data.statesList=t,s.data.state=s.data.statesList[0].value}),s.findPhoneCode=function(e){return e.value==s.data.countryCode},a.sendRequestFor.residenceListSend(),e.$on("residence_list",function(e,t){s.residenceList=t,s.phoneCodeObj=s.residenceList.find(s.findPhoneCode),s.phoneCodeObj.hasOwnProperty("phone_idd")&&(s.data.phone="+"+s.phoneCodeObj.phone_idd)}),s.validateName=function(e){var t=/[`~!@#$%^&*)(_=+\[}{\]\\\/";:\?><,|\d]+/;return{test:function(e){var n=t.test(e);return 1==n?!1:!0}}}(),s.submitAccountOpening=function(){if(s.salutationError=!1,s.firstNameError=!1,s.lastNameError=!1,s.dateOfBirthError=!1,s.countryError=!1,s.addressLine1Error=!1,s.addressLine2Error=!1,s.addressCityError=!1,s.addressStateError=!1,s.addressPostcodeError=!1,s.phoneError=!1,s.secretQuestionError=!1,s.secretAnswerError=!1,s.data.dateOfBirth)var e=s.data.dateOfBirth.toISOString().slice(0,10);_.isEmpty(s.data.state)&&(s.data.state=""),_.isEmpty(s.data.addressLine2)&&(s.data.addressLine2=""),_.isEmpty(s.data.addressPostcode)&&(s.data.addressPostcode="");var t={salutation:s.data.salutation,first_name:s.data.firstName,last_name:s.data.lastName,date_of_birth:e,residence:s.data.countryCode,address_line_1:s.data.addressLine1,address_line_2:s.data.addressLine2,address_city:s.data.addressCity,address_state:s.data.state,address_postcode:s.data.addressPostcode,phone:s.data.phone,secret_question:s.data.secretQuestion,secret_answer:s.data.secretAnswer};a.sendRequestFor.createRealAccountSend(t)},e.$on("new_account_real:error",function(t,n){n.hasOwnProperty("details")&&e.$applyAsync(function(){n.details.hasOwnProperty("salutation")&&(s.salutationError=!0,s.salutationErrorMessage=n.details.salutation),n.details.hasOwnProperty("first_name")&&(s.firstNameError=!0,s.firstNameErrorMessage=n.details.first_name),n.details.hasOwnProperty("last_name")&&(s.lastNameError=!0,s.lastNameErrorMessage=n.details.last_name),n.details.hasOwnProperty("date_of_birth")&&(s.dateOfBirthError=!0,s.dateOfBirthErrorMessage=n.details.date_of_birth),n.details.hasOwnProperty("residence")&&(s.countryError=!0,s.countryErrorMessage=n.details.residence),n.details.hasOwnProperty("address_line_1")&&(s.addressLine1Error=!0,s.addressLine1ErrorMessage=n.details.address_line_1),n.details.hasOwnProperty("address_line_2")&&(s.addressLine2Error=!0,s.addressLine2ErrorMessage=n.details.address_line_2),n.details.hasOwnProperty("address_city")&&(s.addressCityError=!0,s.addressCityErrorMessage=n.details.address_city),n.details.hasOwnProperty("address_state")&&(s.addressStateError=!0,s.addressStateErrorMessage=n.details.address_state),n.details.hasOwnProperty("address_postcode")&&(s.addressPostcodeError=!0,s.addressPostcodeErrorMessage=n.details.address_postcode),n.details.hasOwnProperty("phone")&&(s.phoneError=!0,s.phoneErrorMessage=n.details.phone),n.details.hasOwnProperty("secret_question")&&(s.secretQuestionError=!0,s.secretQuestionErrorMessage=n.details.secret_question),n.details.hasOwnProperty("secret_answer")&&(s.secretAnswerError=!0,s.secretAnswerErrorMessage=n.details.secret_answer)}),n.code&&i.displayError(n.message)}),e.$on("new_account_real",function(e,t){a.authenticate(t.oauth_token),s.selectedAccount=t.oauth_token,o.newAccountAdded=!0,r.addedAccount=s.selectedAccount})}angular.module("binary.pages.new-real-account-opening.components.new-account-real").controller("NewAccountRealController",e),e.$inject=["$scope","$state","$rootScope","websocketService","appStateService","accountService","alertService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/new-real-account-opening/components/new-account-real/new-account-real.template.html",controller:"NewAccountRealController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.new-real-account-opening.components.new-account-real").directive("bgNewAccountReal",e)}(),function(){function e(e,t,n,a,o,r,i){function s(e){for(var t=/acct\d+=(\w+)&token\d+=(\w{2}-\w{29})/g,n=null,a=[];n=t.exec(e);)a.push({loginid:n[1],token:n[2],email:"",is_default:!1});return a}function c(e){for(var t=/error=(\w+)/g,n=null,a=[];n=t.exec(e);)a.push(n[1]);return a}var l=this,u=[],d=function(e){e&&32==e.length?(t.show(),a.authenticate(e)):o.accountError.tokenNotValid()};window.onmessage=function(e){e.data&&e.data.url&&(u=s(e.data.url),u.length>0&&d(u[0].token))},e.$on("authorize",function(e,n){if(n)for(var a in u)0!=a&&(u[a].email=n.email,r.add(u[a]));t.hide()}),l.signin=function(){var e=window.open(n.oauthUrl+"?app_id="+n.app_id+"&l="+i.read(),"_blank","location=no,toolbar=no");$(e).on("loadstart",function(t){var n=t.originalEvent.url;return c(n).length>0?void e.close():(u=s(n),void(u&&u.length&&(e.close(),d(u[0].token))))})}}angular.module("binary.pages.signin.components.oauth").controller("OauthController",e),e.$inject=["$scope","$ionicLoading","config","websocketService","alertService","accountService","languageService"]}(),function(){function e(){var e={restrict:"E",scope:{},templateUrl:"js/pages/sign-in/components/oauth/oauth.template.html",controller:"OauthController",controllerAs:"vm",bindToController:!0};return e}angular.module("binary.pages.signin.components.oauth").directive("oauth",e)}(),function(){function e(e,t,n){function a(){var e="tradeChart";r.chartDragLeft=t.dragLeft,r.chartDragRight=t.dragRight,r.chartTouch=t.dragStart,r.chartRelease=t.dragEnd,r.chartPinchIn=t.zoomOut,r.chartPinchOut=t.zoomIn,r.chartPinchStart=t.zoomStart,r.chartPinchEnd=t.zoomEnd,t.drawChart(e),o()}function o(){if(!_.isEmpty(r.proposal.symbol)){var e=r.proposal.symbol;n.sendRequestFor.forgetTicks(),n.sendRequestFor.ticksHistory({ticks_history:e,end:"latest",count:t.getCapacity(),subscribe:1})}}var r=this;e.$on("$destroy",function(e,n){t.destroy()}),e.$on("portfolio",function(e,n){var a=r.purchasedContract.contractId;_.isEmpty(a)||n.contracts.forEach(function(e){e.contract_id==a&&t.addContract({startTime:e.date_start+1,duration:parseInt(r.proposal.duration),type:"Higher/Lower"===r.proposal.tradeType?e.contract_type+"HL":e.contract_type,barrier:r.proposal.barrier})})}),e.$on("tick",function(e,a){a&&a.echo_req.ticks_history===r.proposal.symbol?t.historyInterface.addTick(a.tick):n.sendRequestFor.forgetStream(a.tick.id)}),e.$on("history",function(e,n){n&&n.echo_req.ticks_history===r.proposal.symbol&&t.historyInterface.addHistory(n.history)}),e.$on("candles",function(e,n){n&&t.historyInterface.addCandles(n.candles)}),e.$on("ohlc",function(e,n){n&&t.historyInterface.addOhlc(n.ohlc)}),e.$on("connection:ready",function(e){o()}),e.$watch(function(){return r.proposal.symbol},function(e,t){r.proposal.symbol&&o()}),a()}angular.module("binary.pages.trade.components.chart.controllers").controller("ChartController",e),e.$inject=["$scope","chartService","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/chart/chart.template.html",controller:"ChartController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=",purchasedContract:"="}};return e}angular.module("binary.pages.trade.components.chart.directives").directive("bgChart",e)}(),function(){function e(e,t){var n=this;n.spots=[],n.reset=!0,n.counter=0,e.$on("contract:spot",function(t,a,o){n.reset&&(n.spots=new Array(a.duration+1).fill().map(function(e,t){return{}}),n.reset=!1,n.counter=0);var r=_.clone(a);e.$applyAsync(function(){n.spots[n.counter++]={result:r.result,value:o.toString().slice(-1)}})}),e.$on("contract:finished",function(e,t){n.reset=!0})}angular.module("binary.pages.trade.components.chart.controllers").controller("DigitResultController",e),e.$inject=["$scope","chartService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/chart/digit-result.template.html",controller:"DigitResultController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.trade.components.chart.directives").directive("bgDigitResult",e)}(),function(){function e(){}angular.module("binary.pages.trade.components.longcode.controllers").controller("LongcodeController",e)}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/longcode/longcode.template.html",controller:"LongcodeController",controllerAs:"vm",bindToController:!0,scope:{purchasedContract:"="}};return e}angular.module("binary.pages.trade.components.longcode.directives").directive("bgLongcode",e)}(),function(){function e(){}angular.module("binary.pages.trade.components.options.controllers").controller("BarrierController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/barrier.template.html",controller:"BarrierController",controllerAs:"vm",bindToController:!0,scope:{proposal:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgBarrier",e)}(),function(){function e(){function e(){var e=JSON.parse(sessionStorage.tradeTypes)[t.tradeType];t.digits=_.union(e[0].last_digit_range,e[1].last_digit_range)}var t=this;t.digits=[],t.selectDigit=function(e){t.select()(e)},e()}angular.module("binary.pages.trade.components.options.controllers").controller("DigitsController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/digits.template.html",controller:"DigitsController",controllerAs:"vm",bindToController:!0,scope:{select:"&",tradeType:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgDigits",e)}(),function(){function e(e,t,n){function a(){return _.isEmpty(sessionStorage.markets)?void setTimeout(a,500):void e.$applyAsync(function(){o.markets=JSON.parse(sessionStorage.markets)})}var o=this;o.markets={},o.selectMarket=function(e){o.select()(e)},a()}angular.module("binary.pages.trade.components.options.controllers").controller("MarketsController",e),e.$inject=["$scope","marketsService","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/markets.template.html",controller:"MarketsController",controllerAs:"vm",bindToController:!0,scope:{select:"&"}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgMarkets",e)}(),function(){function e(){function e(e){
var t=_.findIndex(n,function(t){return t[a.symbol]===e});if(t>-1){var o=_.findIndex(n[t][a.contracts],function(e){return e[a.contractFrom].indexOf("t")>-1});return o>-1}return!1}var t={},n=[],a={symbol:0,displayName:1,contracts:2,contractName:0,contractDisplayName:1,contractFrom:2,contractTo:3};return t.getMarketByIndex=function(e){if(!_.isEmpty(sessionStorage.markets)){var t=JSON.parse(sessionStorage.markets),n=Object.keys(t);return t[n[e]]}return null},t.findTickMarkets=function(){var t=JSON.parse(sessionStorage.active_symbols);n=JSON.parse(sessionStorage.asset_index);var a={};return _.forEach(t,function(t,n){var o=[];for(var r in t)e(t[r].symbol)&&o.push(t[r]);o.length>0&&(a[n]={displayName:t[0].market_display_name,underlying:o})}),sessionStorage.markets=JSON.stringify(a),a},t}angular.module("binary.pages.trade.components.options.services").factory("marketsService",e),e.$inject=[]}(),function(){function e(e,t,n,a,o,r,i,s){function c(){var e=a.get();_.isEmpty(e)||(d.options=e,l()),s.sendRequestFor.symbols()}function l(){e.$applyAsync(function(){d.proposal=o.update(d.options)})}function u(){d.modalCtrl&&d.modalCtrl.hide()}var d=this;d.showOptions=!1,d.marketsClosed=!1,d.SECTIONS={OVERVIEW1:0,OVERVIEW2:1,UNDERLYINGS:2,MARKETS:3,TRADETYPES:4,TICKS:5,DIGITS:6},d.options={market:null,underlying:null,tradeType:null,tick:null,digit:null},d.section1=d.SECTIONS.OVERVIEW1,d.section2=d.SECTIONS.OVERVIEW2,e.$on("symbols:updated",function(e,t){_.isEmpty(t)?(d.showOptions=!1,d.marketsClosed=!0,d.proposal={}):(d.showOptions=!0,s.sendRequestFor.assetIndex())}),e.$on("assetIndex:updated",function(e){var t=n.findTickMarkets();!_.isEmpty(d.options.market)&&_.find(t,["displayName",d.options.market.displayName])?d.selectMarket(d.options.market):d.selectMarket(n.getMarketByIndex(0))}),e.$on("symbol",function(t,n){sessionStorage.groupSymbols=JSON.stringify(n);var a=i.findTickContracts(n);e.$applyAsync(function(){d.options.tradeType=Object.keys(a).indexOf(d.options.tradeType)>-1?d.options.tradeType||Object.keys(a)[0]:Object.keys(a)[0],d.options.tick=d.options.tick||a[d.options.tradeType][0].min_contract_duration.slice(0,-1),d.options.digit=a[d.options.tradeType][0].last_digit_range?d.options.digit||a[d.options.tradeType][0].last_digit_range[0]:null,d.options.barrier=a[d.options.tradeType][0].barriers>0?d.options.barrier||a[d.options.tradeType][0].barrier:null,l(),r.proposalIsReady=!0})}),e.$on("authorize",function(e,t){d.proposal.currency=t.currency}),e.$on("options:updated",function(e,t){d.options=t}),t.fromTemplateUrl("js/pages/trade/components/options/options-modal.html",{scope:e}).then(function(e){d.modalCtrl=e}),d.closeModal=function(){d.section1=d.SECTIONS.OVERVIEW1,d.section2=d.SECTIONS.OVERVIEW2,u()},d.setSection=function(e,t){switch(t){case d.SECTIONS.MARKETS:var n=JSON.parse(sessionStorage.markets||"{}");if(Object.keys(n).length<=1)return;break;case d.SECTIONS.UNDERLYINGS:if(d.options.market.underlying.length<=1)return;break;case d.SECTIONS.TRADETYPES:var a=JSON.parse(sessionStorage.tradeTypes||"{}");if(Object.keys(a).length<=1)return}1==e?(d.section2=d.SECTIONS.OVERVIEW2,d.section1=t):2==e&&(d.section1=d.SECTIONS.OVERVIEW1,d.section2=t),d.modalCtrl.show()},d.selectMarket=function(e){d.options.market=e,d.options.underlying=!_.isEmpty(d.options.underlying)&&_.findIndex(e.underlying,["symbol",d.options.underlying.symbol])>-1?d.options.underlying:e.underlying[0],s.sendRequestFor.contractsForSymbol(d.options.underlying.symbol),d.section1=d.SECTIONS.OVERVIEW1,l(),u()},d.selectUnderlying=function(e){d.options.underlying=e,s.sendRequestFor.contractsForSymbol(e.symbol),d.section1=d.SECTIONS.OVERVIEW1,l(),u()},d.selectTradeType=function(e){d.options.tradeType=e;var e=JSON.parse(sessionStorage.tradeTypes)[e][0];d.options.tick=d.options.tick||e.min_contract_duration.slice(0,-1),d.options.digit=e.last_digit_range?d.options.digit||e.last_digit_range[0]:null,d.options.barrier=e.barriers>0&&!_.isEmpty(e.barrier)?d.options.barrier||e.barrier:null,d.section2=d.SECTIONS.OVERVIEW2,l(),u()},d.selectTick=function(e){d.options.tick=e,d.section2=d.SECTIONS.OVERVIEW2,l(),u()},d.selectDigit=function(e){d.options.digit=e,d.options.barrier=null,d.section2=d.SECTIONS.OVERVIEW2,l(),u()},c()}angular.module("binary.pages.trade.components.options.controllers").controller("OptionsController",e),e.$inject=["$scope","$ionicModal","marketsService","optionsService","proposalService","tradeService","tradeTypesService","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/options.template.html",controller:"OptionsController",controllerAs:"vm",bindToController:!0,scope:{proposal:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgOptions",e)}(),function(){function e(){var e={};return e.get=function(){return _.isEmpty(localStorage.options)?null:JSON.parse(localStorage.options)},e.set=function(e){return _.isEmpty(e)?!1:(localStorage.options=JSON.stringify(e),!0)},e}angular.module("binary.pages.trade.components.options.services").factory("optionsService",e)}(),function(){function e(){function e(){var e=JSON.parse(sessionStorage.tradeTypes)[n.tradeType][0];n.min=Number.parseInt(t(e.min_contract_duration)),n.max=Number.parseInt(t(e.max_contract_duration)),n.tickRange=_.range(n.min,n.max+1)}function t(e){return e.slice(0,-1)}var n=this;n.min=0,n.max=0,n.tickRange=[],n.selectTick=function(e){n.select()(e)},e()}angular.module("binary.pages.trade.components.options.controllers").controller("TicksController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/ticks.template.html",controller:"TicksController",controllerAs:"vm",bindToController:!0,scope:{select:"&",tradeType:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgTicks",e)}(),function(){function e(){function e(){t.tradeTypes=JSON.parse(sessionStorage.tradeTypes)}var t=this;t.tradeTypes={},t.selectTradeType=function(e){t.select()(e)},e()}angular.module("binary.pages.trade.components.options.controllers").controller("TradeTypesController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/trade-types.template.html",controller:"TradeTypesController",controllerAs:"vm",bindToController:!0,scope:{select:"&"}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgTradetypes",e)}(),function(){function e(){var e={};return e.findTickContracts=function(e){var t={};_.forEach(e,function(e,n){var a=[];for(var o in e)"tick"===e[o].expiry_type&&a.push(e[o]);a.length>0&&(t[n]=a)});var n={};return _.forEach(t,function(e,t){if(2==e.length)n[e[0].contract_category_display]=e;else for(var a=0;a<e.length;a+=2){var o=e[a].contract_category_display;"callput"===e[a].contract_category?o=_.isEmpty(e[a].barrier)?"Rise/Fall":"Higher/Lower":o+=" "+e[a].contract_display.capitalize()+"/"+e[a+1].contract_display.capitalize(),n[o]=[e[a],e[a+1]]}}),sessionStorage.tradeTypes=JSON.stringify(n),n},e}angular.module("binary.pages.trade.components.options.services").factory("tradeTypesService",e)}(),function(){function e(){function e(){t.underlyings=t.market.underlying}var t=this;t.underlyings=[],t.selectUnderlying=function(e){t.select()(e)},e()}angular.module("binary.pages.trade.components.options.controllers").controller("UnderlyingsController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/underlyings.template.html",controller:"UnderlyingsController",controllerAs:"vm",bindToController:!0,scope:{market:"=",select:"&"}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgUnderlyings",e)}(),function(){function e(e,t){function n(){}var a=this;a.amount=a.proposal.amount,e.$watch(function(){return a.proposal.amount},function(e,t){e!=a.amount&&(a.amount=e)}),a.changePayoutType=function(){"payout"===a.proposal.basis?a.proposal.basis="stake":a.proposal.basis="payout",t.setPropertyValue("basis",a.proposal.basis)},a.changeAmount=function(){_.isEmpty(a.amount)||"NaN"===a.amount||0==Number(a.amount)?a.proposal.amount=0:a.proposal.amount=a.amount,t.setPropertyValue("amount",a.proposal.amount)},a.add=function(){a.amount=Number(a.amount)+1<=1e4?Number(a.amount)+1:1e5},a.subtract=function(){a.amount=Number(a.amount)-1>=1?Number(a.amount)-1:1},a.stopLongPress=function(){a.proposal.amount=a.amount,t.setPropertyValue("amount",a.proposal.amount)},n()}angular.module("binary.pages.trade.components.payout.controllers").controller("PayoutController",e),e.$inject=["$scope","proposalService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/payout/payout.template.html",controller:"PayoutController",controllerAs:"vm",bindToController:!0,scope:{proposal:"="}};return e}angular.module("binary.pages.trade.components.payout.directives").directive("bgPayout",e)}(),function(){function e(){}angular.module("binary.pages.trade.components.purchase.controllers").controller("ContractSummaryController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/purchase/contract-summary.template.html",controller:"ContractSummaryController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=",purchasedContract:"="}};return e}angular.module("binary.pages.trade.components.purchase.directives").directive("bgContractSummary",e)}(),function(){function e(e,t,n,a,o,r,i,s){function c(){return d.user=a.getDefault(),_.isEmpty(d.contracts)?void setTimeout(c,500):void 0}function l(){r.forget();var e=_.clone(d.proposal);e.contract_type=d.contracts[0].contract_type,e.req_id=1;var t=_.clone(d.proposal);t.contract_type=d.contracts[1].contract_type,t.req_id=2,r.send(e),r.send(t)}function u(){if(_.isEmpty(sessionStorage.tradeTypes))setTimeout(u,5);else{var e=JSON.parse(sessionStorage.tradeTypes);d.contracts=e[d.proposal.tradeType],_.isEmpty(d.contracts)||l()}}var d=this;d.contracts=[],d.proposalResponses=[],d.inPurchaseMode=!1,d.showSummary=!1,d.purchasedContractIndex=-1,e.$watch(function(){return d.proposal},function(e,t){u()},!0),e.$on("appState:tradeMode",function(e){d.showSummary=!o.tradeMode}),e.$on("proposal",function(t,n,a){[1,2].indexOf(a)>-1&&e.$applyAsync(function(){d.proposalResponses[a-1]=n,d.proposalResponses[a-1].hasError=!1})}),e.$on("proposal:error",function(n,a,o){[1,2].indexOf(o)>-1&&(e.$applyAsync(function(){d.proposalResponses[o-1]=a,d.proposalResponses[o-1].hasError=!0}),t(d.autoSizeText,1e3))}),e.$on("purchase",function(t,n){_.isEmpty(n.buy)||(d.showSummary=!0,e.$applyAsync(function(){d.purchasedContract={contractId:n.buy.contract_id,longcode:n.buy.longcode,payout:d.proposalResponses[d.purchasedContractIndex].payout,cost:n.buy.buy_price,profit:parseFloat(d.proposalResponses[d.purchasedContractIndex].payout)-parseFloat(n.buy.buy_price),balance:n.buy.balance_after,transactionId:n.buy.transaction_id}}),s.sendRequestFor.portfolio())}),e.$on("purchase:error",function(e,t){d.inPurchaseMode=!1,d.showSummary=!1,o.tradeMode=!0,o.purchaseMode=!1,d.purchasedContractIndex=-1,l()}),e.$on("contract:finished",function(e,t){if(t.exitSpot){"win"===t.result?(d.purchasedContract.buyPrice=d.purchasedContract.cost,d.purchasedContract.profit=d.purchasedContract.profit,d.purchasedContract.finalPrice=d.purchasedContract.buyPrice+d.purchasedContract.profit,s.sendRequestFor.openContract()):"lose"===t.result&&(d.purchasedContract.buyPrice=d.purchasedContract.cost,d.purchasedContract.loss=d.purchasedContract.cost,d.purchasedContract.finalPrice=d.purchasedContract.buyPrice+d.purchasedContract.loss),d.purchasedContract.result="lose"===t.result?"loss":t.result;var a=d.contracts[d.purchasedContractIndex];n.google.trackEvent(a.market,a.contract_type,a.underlying_symbol,d.purchasedContract.payout);var r={Symbol:a.underlying_symbol,TradeType:a.contract_type,Stake:d.purchasedContract.buyPrice,Market:a.market,Duration:d.proposal.duration,DurationUnit:d.proposal.duration_unit,result:"lose"===t.result?"Lost":"Won"};n.amplitude.logEvent("Purchase",r),l(),d.inPurchaseMode=!1,o.purchaseMode=!1}}),d.getImageUrl=function(e){return"img/trade-icon/"+e.toLowerCase()+".svg"},d.purchase=function(t){e.$applyAsync(function(){d.inPurchaseMode=!0,d.purchasedContractIndex=t,o.purchaseMode=!0,o.tradeMode=!1}),r.purchase(d.proposalResponses[t])},d.backToTrade=function(){d.showSummary=!1,o.tradeMode=!0,o.purchaseMode=!1,d.purchasedContractIndex=-1},d.autoSizeText=function(){var e,t,n,a,o;if(t=document.getElementsByClassName("resize"),!(t.length<0)){for(o=[],n=0,a=t.length;a>n;n++)e=t[n],o.push(function(e){var t,n;for(t=function(){var t;return t=parseInt($(e).css("font-size").slice(0,-2))-1+"px",$(e).css("font-size",t)},n=[];e.scrollHeight>e.offsetHeight;)n.push(t());return n}(e));return o}},c()}angular.module("binary.pages.trade.components.purchase.controllers").controller("PurchaseController",e),e.$inject=["$scope","$timeout","analyticsService","accountService","appStateService","proposalService","tradeService","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/purchase/purchase.template.html",controller:"PurchaseController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=",purchasedContract:"=",showSummary:"=inPurchaseMode"}};return e}angular.module("binary.pages.trade.components.purchase.directives").directive("bgPurchase",e)}(),angular.module("binary").controller("BodyController",["$scope","languageService",function(e,t){var n=this;n.getLanguage=function(){return t.read()}}]);